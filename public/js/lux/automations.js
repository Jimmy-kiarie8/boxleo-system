(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1151:function(e,t,l){"use strict";l.r(t);var a=l(2);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,a)}return l}function i(e,t,l){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var a=l.call(e,t||"default");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var n={components:{},data:function(){return i(i(i(i(i(i(i({options:[{value:"users",label:"Users"},{value:"sales",label:"Orders"}],message:"",opt:"",deliver_status:[{value:"Open"},{value:"Inprogress"},{value:"Shipped"},{value:"Delivered"},{value:"Confirmed"},{value:"Closed"}],operators:[{value:"AND"},{value:"OR"}]},"operators",[{value:"AND"},{value:"OR"}]),"actions",[{value:"Send SMS"},{value:"Send Email"},{value:"Update Order"}]),"execute_when",[{label:"When any field is updated",value:"1"},{label:"When any selected field is updated",value:"2"},{label:"When all selected fields are updated",value:"3"}]),"form",{selected_column:[],trigger_when:"created",execute_when:"",conditions:[{condition:"",row:{Type:""},operator:"When",value:""}],actions:[{action:"Send Email",mail_template:"",sms:"",update_field:""}],message:""}),"controlOnStart",!0),"string_conditions",[{value:"is",op:"="},{value:"is not",op:"!="},{value:"contains",op:"LIKE"},{value:"doesn't contain"},{value:"Starts with",op:"start"},{value:"Ends with",op:"end"},{value:"is empty",op:"null"},{value:"is not empty",op:"not_empty"}]),"conditions",[{value:"is",op:"="},{value:"is not",op:"!="},{value:"is greater than",op:">"},{value:"is greater than or equal to",op:">="},{value:"is less than or equal to",op:"<="},{value:"is less than",op:"<"},{value:"is in",op:"in"},{value:"is not in",op:"in"}])},methods:{add_action:function(){this.form.actions.push({type:"",mail_template:"",sms:"",update_field:""})},save:function(){this.form.message=this.message;var e={data:this.form,model:"automation"};this.$store.dispatch("postItems",e).then((function(e){}))},remove:function(e){this.form.conditions.splice(e,1)},remove_action:function(e){this.form.actions.splice(e,1)},getApp:function(){this.$store.dispatch("showItem",{model:"app_custom",id:1,update:"updateTableRows"})},getSms:function(){this.$store.dispatch("getItems",{model:"sms_template",update:"updateSmsTemplate"})},getStatus:function(){this.$store.dispatch("getItems",{model:"statuses",update:"updateStatusList"})},add_row:function(){this.form.conditions.push({condition:"",row:{Type:""},operator:"AND",value:""})},clone:function(e){return{label:e.label}},pullFunction:function(){return!this.controlOnStart||"clone"},start:function(e){var t=e.originalEvent;this.controlOnStart=t.ctrlKey},getRows:function(e){this.getMails(e);var t={model:"table_rows",search:e,update:"updateTableRows"};this.$store.dispatch("searchItems",t)},get_templates:function(e){var t={model:"templates",search:e,update:"updateTableRows"};this.$store.dispatch("searchItems",t)},getMails:function(e){var t={model:"mailable",id:e,update:"updateTemplates"};this.$store.dispatch("showItem",t)}},computed:function(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?r(Object(l),!0).forEach((function(t){i(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):r(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}({},Object(a.b)(["table_rows","statuses","templates","sms_template"])),mounted:function(){this.getStatus(),this.getSms()}},s=l(0),c=Object(s.a)(n,(function(){var e=this,t=e._self._c;return t("div",[t("v-container",{staticStyle:{"margin-bottom":"50px"},attrs:{fluid:"","fill-height":""}},[t("v-layout",{attrs:{"justify-center":"","align-center":"",wrap:""}},[t("v-flex",{attrs:{sm12:""}},[t("v-card",{staticStyle:{padding:"20px 20px"}},[t("v-card-title",{attrs:{"primary-title":""}},[t("h3",{staticStyle:{margin:"auto"}},[e._v("Create Workflow Rule")])]),e._v(" "),t("v-divider"),e._v(" "),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm5:""}},[t("label",{attrs:{for:""}},[e._v("Name *")]),e._v(" "),t("el-input",{attrs:{placeholder:"Please input"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),t("v-flex",{staticStyle:{"margin-left":"20px"},attrs:{sm5:""}},[t("label",{attrs:{for:""}},[e._v("Module *")]),e._v(" "),t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Select",filterable:"",clearable:""},on:{change:e.getRows},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"}}),e._v(" "),t("v-divider"),e._v(" "),t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm1:""}},[t("el-radio",{attrs:{label:"1"},model:{value:e.form.trigger_when,callback:function(t){e.$set(e.form,"trigger_when",t)},expression:"form.trigger_when"}},[e._v("Created")]),e._v(" "),t("el-radio",{attrs:{label:"2"},model:{value:e.form.trigger_when,callback:function(t){e.$set(e.form,"trigger_when",t)},expression:"form.trigger_when"}},[e._v("Edited")]),e._v(" "),t("el-radio",{attrs:{label:"3"},model:{value:e.form.trigger_when,callback:function(t){e.$set(e.form,"trigger_when",t)},expression:"form.trigger_when"}},[e._v("Created or Edited")]),e._v(" "),t("el-radio",{attrs:{label:"4"},model:{value:e.form.trigger_when,callback:function(t){e.$set(e.form,"trigger_when",t)},expression:"form.trigger_when"}},[e._v("Deleted")]),e._v(" "),t("el-radio",{attrs:{label:"5"},model:{value:e.form.trigger_when,callback:function(t){e.$set(e.form,"trigger_when",t)},expression:"form.trigger_when"}},[e._v("Date change")])],1),e._v(" "),"2"==e.form.trigger_when||"3"==e.form.trigger_when?t("v-flex",{attrs:{sm3:"","offset-sm1":""}},[t("label",{attrs:{for:""}},[e._v("Execute the workflow when *")]),e._v(" "),t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Select",filterable:"",clearable:""},model:{value:e.form.execute_when,callback:function(t){e.$set(e.form,"execute_when",t)},expression:"form.execute_when"}},e._l(e.execute_when,(function(e,l){return t("el-option",{key:l,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),"2"==e.form.execute_when||"3"==e.form.execute_when?t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm2:""}},[t("label",{attrs:{for:""}},[e._v("Columns")]),e._v(" "),t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select fields",multiple:""},model:{value:e.form.selected_column,callback:function(t){e.$set(e.form,"selected_column",t)},expression:"form.selected_column"}},e._l(e.table_rows,(function(e,l){return t("el-option",{key:l,attrs:{label:e.label,value:e.Field}})})),1)],1):e._e()],1),e._v(" "),t("v-divider"),e._v(" "),"2"==e.form.trigger_when||"3"==e.form.trigger_when||"5"==e.form.trigger_when?t("div",[t("h4",[e._v("Define the criteria ( if any )")]),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"}}),e._v(" "),e._l(e.form.conditions,(function(l,a){return t("v-layout",{key:a,staticStyle:{"margin-top":"20px"},attrs:{row:"",wrap:""}},[t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm2:""}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select",disabled:0==a},model:{value:l.operator,callback:function(t){e.$set(l,"operator",t)},expression:"items.operator"}},e._l(e.operators,(function(e){return t("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1),e._v(" "),t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm2:""}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select","value-key":"key"},model:{value:l.row,callback:function(t){e.$set(l,"row",t)},expression:"items.row"}},e._l(e.table_rows,(function(e,l){return t("el-option",{key:l,attrs:{label:e.label,value:e}})})),1)],1),e._v(" "),t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm2:""}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.condition,callback:function(t){e.$set(l,"condition",t)},expression:"items.condition"}},e._l("varchar(191)"==l.row.Type||"varchar(255)"==l.row.Type||"text"==l.row.Type?e.string_conditions:e.conditions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.value,value:e.op}})})),1)],1),e._v(" "),l.condition?t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm2:""}},[e.form.conditions.length>0?t("div",["tinyint(1)"==e.form.conditions[a].row.Type?t("div",[t("el-radio",{attrs:{label:"true"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}},[e._v("True")]),e._v(" "),t("el-radio",{attrs:{label:"false"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}},[e._v("False")])],1):"Inprogress"==e.form.conditions[a].row.Default?t("div",["delivery_status"==e.form.conditions[a].row.Field?t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}},e._l(e.statuses,(function(e){return t("el-option",{key:e.id,attrs:{label:e.status,value:e.status}})})),1):t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}},e._l(e.deliver_status,(function(e,l){return t("el-option",{key:l,attrs:{label:e.value,value:e.value}})})),1)],1):"datetime"==e.form.conditions[a].row.Type||"timestamp"==e.form.conditions[a].row.Type?t("div",[t("el-input",{attrs:{placeholder:"Please input"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}},[t("template",{slot:"append"},[e._v("Days")])],2),e._v(" "),t("span",[e._v(" from today")])],1):t("div",[t("el-input",{attrs:{type:-1!==e.form.conditions[a].row.Type.indexOf("int")||-1!==e.form.conditions[a].row.Type.indexOf("decimal")?"number":"text",placeholder:"Please input"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}})],1)]):e._e()]):e._e(),e._v(" "),a>0?t("v-flex",{staticStyle:{margin:"5px 0 0 10px"},attrs:{sm1:""}},[t("v-btn",{attrs:{text:"",icon:"",color:"pink"},on:{click:function(t){return e.remove(a)}}},[t("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)],1):e._e()],1)})),e._v(" "),t("v-btn",{staticStyle:{"margin-top":"20px"},attrs:{small:"",text:"",color:"primary"},on:{click:e.add_row}},[t("v-icon",[e._v("mdi-plus")]),e._v(" "),t("span",[e._v("Add Criteria")])],1)],2):e._e(),e._v(" "),t("div",{staticStyle:{height:"30px"}}),e._v(" "),t("table",{staticClass:"table table-hover table-striped"},[t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[e._v("#")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("Type")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("Action")])])]),e._v(" "),t("tbody",e._l(e.form.actions,(function(l,a){return t("tr",{key:a},[t("th",{attrs:{scope:"row"}},[e._v(e._s(a+1))]),e._v(" "),t("td",[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.action,callback:function(t){e.$set(l,"action",t)},expression:"action.action"}},e._l(e.actions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1),e._v(" "),t("td",["Send Email"==l.action?t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.mailable_id,callback:function(t){e.$set(l,"mailable_id",t)},expression:"action.mailable_id"}},e._l(e.templates,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):e._e(),e._v(" "),"Send SMS"==l.action?t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.smstemplate_id,callback:function(t){e.$set(l,"smstemplate_id",t)},expression:"action.smstemplate_id"}},e._l(e.sms_template,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):e._e(),e._v(" "),"Update Order"==l.action?t("div",[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Update field","value-key":"key"},model:{value:l.update_field,callback:function(t){e.$set(l,"update_field",t)},expression:"action.update_field"}},e._l(e.table_rows,(function(e,l){return t("el-option",{key:l,attrs:{label:e.label,value:e}})})),1),e._v(" "),t("span",[e._v("Update to")]),e._v(" "),l.update_field?t("div",{staticStyle:{"margin-left":"10px",float:"right"}},[l.update_field?t("div",["tinyint(1)"==l.update_field.Type?t("div",[t("el-radio",{attrs:{label:"true"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}},[e._v("True")]),e._v(" "),t("el-radio",{attrs:{label:"false"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}},[e._v("False")])],1):"Inprogress"==l.update_field.Default?t("div",["delivery_status"==l.update_field.Field?t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}},e._l(e.statuses,(function(e){return t("el-option",{key:e.id,attrs:{label:e.status,value:e.status}})})),1):t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}},e._l(e.deliver_status,(function(e,l){return t("el-option",{key:l,attrs:{label:e.value,value:e.value}})})),1)],1):"datetime"==l.update_field.Type||"timestamp"==l.update_field.Type?t("div",[t("el-input",{attrs:{placeholder:"Please input"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}},[t("template",{slot:"append"},[e._v("Days")])],2),e._v("\n                                                        from today\n                                                    ")],1):t("div",[t("el-input",{attrs:{type:-1!==l.update_field.Type.indexOf("int")||-1!==l.update_field.Type.indexOf("decimal")?"number":"text",placeholder:"Please input"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}})],1)]):e._e()]):e._e()],1):e._e()],1),e._v(" "),t("td",[t("v-btn",{attrs:{text:"",icon:"",color:"pink"},on:{click:function(t){return e.remove_action(a)}}},[t("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)],1)])})),0)]),e._v(" "),t("v-btn",{staticStyle:{"margin-top":"20px"},attrs:{small:"",text:"",color:"primary"},on:{click:e.add_action}},[t("v-icon",[e._v("mdi-plus")]),e._v(" "),t("span",[e._v("Add Action")])],1)],1)],1)],1)],1),e._v(" "),t("v-footer",{staticStyle:{background:"#e2e0e0 !important"},attrs:{app:""}},[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"primary"},on:{click:e.save}},[t("v-icon",[e._v("mdi-content-save")]),e._v(" "),t("span",[e._v("Save")])],1),e._v(" "),t("v-spacer")],1)],1)],1)}),[],!1,null,null,null);t.default=c.exports},1152:function(e,t,l){"use strict";l.r(t);var a=l(2);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,a)}return l}function i(e,t,l){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var a=l.call(e,t||"default");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var n={components:{},data:function(){return i(i(i(i(i(i(i({options:[{value:"users",label:"Users"},{value:"sales",label:"Orders"}],message:"",opt:"",deliver_status:[{value:"Open"},{value:"Inprogress"},{value:"Shipped"},{value:"Delivered"},{value:"Confirmed"},{value:"Closed"}],operators:[{value:"AND"},{value:"OR"}]},"operators",[{value:"AND"},{value:"OR"}]),"actions",[{value:"Send SMS"},{value:"Send Email"},{value:"Update Order"}]),"execute_when",[{label:"When any field is updated",value:"1"},{label:"When any selected field is updated",value:"2"},{label:"When all selected fields are updated",value:"3"}]),"form",{}),"controlOnStart",!0),"string_conditions",[{value:"is",op:"="},{value:"is not",op:"!="},{value:"contains",op:"LIKE"},{value:"doesn't contain"},{value:"Starts with",op:"start"},{value:"Ends with",op:"end"},{value:"is empty",op:"null"},{value:"is not empty",op:"not_empty"}]),"conditions",[{value:"is",op:"="},{value:"is not",op:"!="},{value:"is greater than",op:">"},{value:"is greater than or equal to",op:">="},{value:"is less than or equal to",op:"<="},{value:"is less than",op:"<"},{value:"is in",op:"in"},{value:"is not in",op:"in"}])},methods:{add_action:function(){this.form.actions.push({type:"",mail_template:"",sms:"",update_field:""})},save:function(){this.form.message=this.message;var e={data:this.form,id:this.$route.params.id,model:"automation"};this.$store.dispatch("patchItems",e).then((function(e){}))},remove:function(e){this.form.conditions.splice(e,1)},remove_action:function(e){this.form.actions.splice(e,1)},getApp:function(){this.$store.dispatch("showItem",{model:"app_custom",id:1,update:"updateTableRows"})},getSms:function(){this.$store.dispatch("getItems",{model:"sms_template",update:"updateSmsTemplate"})},getStatus:function(){this.$store.dispatch("getItems",{model:"statuses",update:"updateStatusList"})},getAutomation:function(){var e=this,t={model:"automation",id:this.$route.params.id,update:"updateAutomationList"};this.$store.dispatch("showItem",t).then((function(t){e.form=t.data,e.getRows(t.data.model)}))},add_row:function(){this.form.conditions.push({condition:"",row:{Type:""},operator:"AND",value:""})},clone:function(e){return{label:e.label}},pullFunction:function(){return!this.controlOnStart||"clone"},start:function(e){var t=e.originalEvent;this.controlOnStart=t.ctrlKey},getRows:function(e){this.getMails(e);var t={model:"table_rows",search:e,update:"updateTableRows"};this.$store.dispatch("searchItems",t)},get_templates:function(e){var t={model:"templates",search:e,update:"updateTableRows"};this.$store.dispatch("searchItems",t)},getMails:function(e){var t={model:"mailable",id:e,update:"updateTemplates"};this.$store.dispatch("showItem",t)}},computed:function(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?r(Object(l),!0).forEach((function(t){i(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):r(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}({},Object(a.b)(["table_rows","statuses","templates","sms_template","automations"])),mounted:function(){this.getAutomation(),this.getStatus(),this.getSms()}},s=l(0),c=Object(s.a)(n,(function(){var e=this,t=e._self._c;return t("div",[t("v-container",{staticStyle:{"margin-bottom":"50px"},attrs:{fluid:"","fill-height":""}},[t("v-layout",{attrs:{"justify-center":"","align-center":"",wrap:""}},[t("v-flex",{attrs:{sm12:""}},[t("v-card",{staticStyle:{padding:"20px 20px"}},[t("v-card-title",{attrs:{"primary-title":""}},[t("h3",{staticStyle:{margin:"auto"}},[e._v("Create Workflow Rule")])]),e._v(" "),t("v-divider"),e._v(" "),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm5:""}},[t("label",{attrs:{for:""}},[e._v("Name *")]),e._v(" "),t("el-input",{attrs:{placeholder:"Please input"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),t("v-flex",{staticStyle:{"margin-left":"20px"},attrs:{sm5:""}},[t("label",{attrs:{for:""}},[e._v("Module *")]),e._v(" "),t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Select",filterable:"",clearable:""},on:{change:e.getRows},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"}}),e._v(" "),t("v-divider"),e._v(" "),t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm1:""}},[t("el-radio",{attrs:{label:"1"},model:{value:e.form.trigger_when,callback:function(t){e.$set(e.form,"trigger_when",t)},expression:"form.trigger_when"}},[e._v("Created")]),e._v(" "),t("el-radio",{attrs:{label:"2"},model:{value:e.form.trigger_when,callback:function(t){e.$set(e.form,"trigger_when",t)},expression:"form.trigger_when"}},[e._v("Edited")]),e._v(" "),t("el-radio",{attrs:{label:"3"},model:{value:e.form.trigger_when,callback:function(t){e.$set(e.form,"trigger_when",t)},expression:"form.trigger_when"}},[e._v("Created or Edited")]),e._v(" "),t("el-radio",{attrs:{label:"4"},model:{value:e.form.trigger_when,callback:function(t){e.$set(e.form,"trigger_when",t)},expression:"form.trigger_when"}},[e._v("Deleted")]),e._v(" "),t("el-radio",{attrs:{label:"5"},model:{value:e.form.trigger_when,callback:function(t){e.$set(e.form,"trigger_when",t)},expression:"form.trigger_when"}},[e._v("Date change")])],1),e._v(" "),"2"==e.form.trigger_when||"3"==e.form.trigger_when?t("v-flex",{attrs:{sm3:"","offset-sm1":""}},[t("label",{attrs:{for:""}},[e._v("Execute the workflow when *")]),e._v(" "),t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Select",filterable:"",clearable:""},model:{value:e.form.execute_when,callback:function(t){e.$set(e.form,"execute_when",t)},expression:"form.execute_when"}},e._l(e.execute_when,(function(e,l){return t("el-option",{key:l,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),"2"==e.form.execute_when||"3"==e.form.execute_when?t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm2:""}},[t("label",{attrs:{for:""}},[e._v("Columns")]),e._v(" "),t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select fields",multiple:""},model:{value:e.form.selected_column,callback:function(t){e.$set(e.form,"selected_column",t)},expression:"form.selected_column"}},e._l(e.table_rows,(function(e,l){return t("el-option",{key:l,attrs:{label:e.label,value:e.Field}})})),1)],1):e._e()],1),e._v(" "),t("v-divider"),e._v(" "),"2"==e.form.trigger_when||"3"==e.form.trigger_when||"5"==e.form.trigger_when?t("div",[t("h4",[e._v("Define the criteria ( if any )")]),e._v(" "),t("div",{staticStyle:{"margin-top":"30px"}}),e._v(" "),e._l(e.form.conditions,(function(l,a){return t("v-layout",{key:a,staticStyle:{"margin-top":"20px"},attrs:{row:"",wrap:""}},[t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm2:""}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select",disabled:0==a},model:{value:l.operator,callback:function(t){e.$set(l,"operator",t)},expression:"items.operator"}},e._l(e.operators,(function(e){return t("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1),e._v(" "),t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm2:""}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select","value-key":"key"},model:{value:l.row,callback:function(t){e.$set(l,"row",t)},expression:"items.row"}},e._l(e.table_rows,(function(e,l){return t("el-option",{key:l,attrs:{label:e.label,value:e}})})),1)],1),e._v(" "),t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm2:""}},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.condition,callback:function(t){e.$set(l,"condition",t)},expression:"items.condition"}},e._l("varchar(191)"==l.row.Type||"varchar(255)"==l.row.Type||"text"==l.row.Type?e.string_conditions:e.conditions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.value,value:e.op}})})),1)],1),e._v(" "),l.condition?t("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm2:""}},[e.form.conditions.length>0?t("div",["tinyint(1)"==e.form.conditions[a].row.Type?t("div",[t("el-radio",{attrs:{label:"true"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}},[e._v("True")]),e._v(" "),t("el-radio",{attrs:{label:"false"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}},[e._v("False")])],1):"Inprogress"==e.form.conditions[a].row.Default?t("div",["delivery_status"==e.form.conditions[a].row.Field?t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}},e._l(e.statuses,(function(e){return t("el-option",{key:e.id,attrs:{label:e.status,value:e.status}})})),1):t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}},e._l(e.deliver_status,(function(e,l){return t("el-option",{key:l,attrs:{label:e.value,value:e.value}})})),1)],1):"datetime"==e.form.conditions[a].row.Type||"timestamp"==e.form.conditions[a].row.Type?t("div",[t("el-input",{attrs:{placeholder:"Please input"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}},[t("template",{slot:"append"},[e._v("Days")])],2),e._v(" "),t("span",[e._v(" from today")])],1):t("div",[t("el-input",{attrs:{type:-1!==e.form.conditions[a].row.Type.indexOf("int")||-1!==e.form.conditions[a].row.Type.indexOf("decimal")?"number":"text",placeholder:"Please input"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"items.value"}})],1)]):e._e()]):e._e(),e._v(" "),a>0?t("v-flex",{staticStyle:{margin:"5px 0 0 10px"},attrs:{sm1:""}},[t("v-btn",{attrs:{text:"",icon:"",color:"pink"},on:{click:function(t){return e.remove(a)}}},[t("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)],1):e._e()],1)})),e._v(" "),t("v-btn",{staticStyle:{"margin-top":"20px"},attrs:{small:"",text:"",color:"primary"},on:{click:e.add_row}},[t("v-icon",[e._v("mdi-plus")]),e._v(" "),t("span",[e._v("Add Criteria")])],1)],2):e._e(),e._v(" "),t("div",{staticStyle:{height:"30px"}}),e._v(" "),t("table",{staticClass:"table table-hover table-striped"},[t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[e._v("#")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("Type")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("Action")])])]),e._v(" "),t("tbody",e._l(e.form.actions,(function(l,a){return t("tr",{key:a},[t("th",{attrs:{scope:"row"}},[e._v(e._s(a+1))]),e._v(" "),t("td",[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.action,callback:function(t){e.$set(l,"action",t)},expression:"action.action"}},e._l(e.actions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),1)],1),e._v(" "),t("td",["Send Email"==l.action?t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.mailable_id,callback:function(t){e.$set(l,"mailable_id",t)},expression:"action.mailable_id"}},e._l(e.templates,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):e._e(),e._v(" "),"Send SMS"==l.action?t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.smstemplate_id,callback:function(t){e.$set(l,"smstemplate_id",t)},expression:"action.smstemplate_id"}},e._l(e.sms_template,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1):e._e(),e._v(" "),"Update Order"==l.action?t("div",[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Update field","value-key":"key"},model:{value:l.update_field,callback:function(t){e.$set(l,"update_field",t)},expression:"action.update_field"}},e._l(e.table_rows,(function(e,l){return t("el-option",{key:l,attrs:{label:e.label,value:e}})})),1),e._v(" "),t("span",[e._v("Update to")]),e._v(" "),l.update_field?t("div",{staticStyle:{"margin-left":"10px",float:"right"}},[l.update_field?t("div",["tinyint(1)"==l.update_field.Type?t("div",[t("el-radio",{attrs:{label:"true"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}},[e._v("True")]),e._v(" "),t("el-radio",{attrs:{label:"false"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}},[e._v("False")])],1):"Inprogress"==l.update_field.Default?t("div",["delivery_status"==l.update_field.Field?t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}},e._l(e.statuses,(function(e){return t("el-option",{key:e.id,attrs:{label:e.status,value:e.status}})})),1):t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}},e._l(e.deliver_status,(function(e,l){return t("el-option",{key:l,attrs:{label:e.value,value:e.value}})})),1)],1):"datetime"==l.update_field.Type||"timestamp"==l.update_field.Type?t("div",[t("el-input",{attrs:{placeholder:"Please input"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}},[t("template",{slot:"append"},[e._v("Days")])],2),e._v("\n                                                        from today\n                                                    ")],1):t("div",[t("el-input",{attrs:{type:-1!==l.update_field.Type.indexOf("int")||-1!==l.update_field.Type.indexOf("decimal")?"number":"text",placeholder:"Please input"},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"action.value"}})],1)]):e._e()]):e._e()],1):e._e()],1),e._v(" "),t("td",[t("v-btn",{attrs:{text:"",icon:"",color:"pink"},on:{click:function(t){return e.remove_action(a)}}},[t("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)],1)])})),0)]),e._v(" "),t("v-btn",{staticStyle:{"margin-top":"20px"},attrs:{small:"",text:"",color:"primary"},on:{click:e.add_action}},[t("v-icon",[e._v("mdi-plus")]),e._v(" "),t("span",[e._v("Add Action")])],1)],1)],1)],1)],1),e._v(" "),t("v-footer",{staticStyle:{background:"#e2e0e0 !important"},attrs:{app:""}},[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"primary"},on:{click:e.save}},[t("v-icon",[e._v("mdi-content-save")]),e._v(" "),t("span",[e._v("Save")])],1),e._v(" "),t("v-spacer")],1)],1)],1)}),[],!1,null,null,null);t.default=c.exports}}]);