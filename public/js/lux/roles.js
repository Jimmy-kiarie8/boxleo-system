(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1109:function(e,t,o){"use strict";o.r(t);var s=o(2);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function a(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var s=o.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var i={data:function(){var e=Object.freeze({name:"",description:""});return{errors:[],selectAll:[],dialog:!1,loading:!1,selected:[],defaultForm:e,loader:!1,form:Object.assign({},e),options:[{value:"web",label:"User"},{value:"clients",label:"Client"}]}},methods:{save:function(){var e=this;this.loading=!0,axios.post("/roles",{form:this.$data.form,selected:this.$data.selected}).then((function(t){e.loading=!1,e.$store.dispatch("getRoles"),e.$store.dispatch("alertEvent","Role created"),e.close()})).catch((function(t){e.loading=!1,e.errors=t.response.data.errors}))},resetForm:function(){this.form=Object.assign({},this.defaultForm),this.$refs.form.reset()},close:function(){this.dialog=!1},selectRoles:function(){var e=this;this.selected=[],this.selectAll.forEach((function(t){e.permissions.forEach((function(t){e.selected.push(t.name)}))}))},getPermissions:function(e){var t={model:"permissions/"+e,update:"updatePermissionList"};this.$store.dispatch("getItems",t)}},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({formIsValid:function(){return this.form.name},sortPerm:function(){return _.orderBy(this.permissions,"name","asc")}},Object(s.b)(["permissions"])),created:function(){var e=this;eventBus.$on("openCreateRoleEvent",(function(t){e.dialog=!0,e.getPermissions(t.guard)}))}},l=o(0),c={data:function(){return{loading:!1,dialog:!1,selected:[],selectAll:[],form:{}}},methods:{save:function(){var e=this;this.loading=!0,axios.patch("/roles/".concat(this.form.id),{form:this.form,selected:this.selected}).then((function(t){eventBus.$emit("alertRequest","Updated"),e.loading=!1,e.$store.dispatch("getRoles"),e.close()})).catch((function(t){e.loading=!1,e.errors=t.response.data.errors}))},resetForm:function(){this.form=Object.assign({},this.defaultForm),this.$refs.form.reset()},close:function(){this.dialog=!1},getRolePerm:function(e){var t=this;axios.post("/getRolesPerm/".concat(e.guard_name,"/").concat(e.id),e).then((function(e){t.selected=e.data})).catch((function(e){500!==e.response.status?(401!==e.response.status&&409!==e.response.status||eventBus.$emit("reloadRequest",e.response.statusText),t.errors=e.response.data.errors):eventBus.$emit("errorEvent",e.response.statusText)}))},selectRoles:function(){var e=this;this.selected=[],this.selectAll.forEach((function(t){e.permissions.forEach((function(t){e.selected.push(t.name)}))}))},getPermissions:function(e){var t={model:"permissions/"+e,update:"updatePermissionList"};this.$store.dispatch("getItems",t)}},created:function(){var e=this;eventBus.$on("openEditRoleEvent",(function(t){e.form=t,e.dialog=!0,e.getRolePerm(t),e.getPermissions(t.guard_name)}))},mounted:function(){},computed:{permissions:function(){return this.$store.getters.permissions},role_perm:function(){return this.$store.getters.role_perm}}},u={props:["user"],components:{myCreate:Object(l.a)(i,(function(){var e=this,t=e._self._c;return t("v-layout",{attrs:{row:"","justify-center":""}},[t("v-dialog",{attrs:{persistent:"","max-width":"1000px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("v-card",[t("v-card-title",{attrs:{fixed:""}},[t("span",{staticClass:"headline"},[e._v("Add Role")]),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{icon:"",dark:""},on:{click:e.close}},[t("v-icon",{attrs:{color:"black"}},[e._v("close")])],1)],1),e._v(" "),t("v-card-text",[t("v-container",{attrs:{"grid-list-md":""}},[t("v-layout",{attrs:{wrap:""}},[t("v-form",{ref:"form",on:{submit:function(e){e.preventDefault()}}},[t("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[t("v-layout",{attrs:{wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:""}},[t("v-text-field",{attrs:{color:"blue darken-2",label:"Role",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),t("v-checkbox",{attrs:{label:"Select All",value:"all"},on:{change:e.selectRoles},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}})],1),e._v(" "),t("v-layout",{attrs:{wrap:""}},e._l(e.sortPerm,(function(o,s){return t("v-flex",{key:s,attrs:{xs6:"",sm3:""}},[t("v-checkbox",{attrs:{label:o.name,value:o.name},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)})),1)],1),e._v(" "),t("v-card-actions",[t("v-btn",{attrs:{text:""},on:{click:e.resetForm}},[e._v("Reset")]),e._v(" "),t("v-btn",{attrs:{text:""},on:{click:e.close}},[e._v("Close")]),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{disabled:e.loading,text:"",color:"primary",loading:e.loading},on:{click:e.save}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,myEdit:Object(l.a)(c,(function(){var e=this,t=e._self._c;return t("v-layout",{attrs:{row:"","justify-center":""}},[t("v-dialog",{attrs:{persistent:"","max-width":"1000px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("v-card",[t("v-card-title",{attrs:{fixed:""}},[t("span",{staticClass:"headline"},[e._v("Edit "+e._s(e.form.name)+" permissions")]),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{icon:"",dark:""},on:{click:e.close}},[t("v-icon",{attrs:{color:"black"}},[e._v("close")])],1)],1),e._v(" "),t("v-card-text",[t("v-container",{attrs:{"grid-list-md":""}},[t("v-layout",{attrs:{wrap:""}},[t("v-form",{ref:"form",on:{submit:function(e){e.preventDefault()}}},[t("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[t("v-layout",{attrs:{wrap:""}},[t("v-flex",{attrs:{xs12:"",sm12:""}},[t("v-text-field",{attrs:{color:"blue darken-2",label:"Role",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),t("v-layout",{attrs:{wrap:""}},[t("v-flex",{attrs:{sm12:""}},[t("v-checkbox",{attrs:{label:"Select All",value:"all"},on:{change:e.selectRoles},model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}})],1),e._v(" "),e._l(e.permissions,(function(o,s){return t("v-flex",{key:s,attrs:{xs6:"",sm3:""}},[t("v-checkbox",{attrs:{label:o.name,value:o.name},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)}))],2)],1),e._v(" "),t("v-card-actions",[t("v-btn",{attrs:{text:""},on:{click:e.resetForm}},[e._v("Reset")]),e._v(" "),t("v-btn",{attrs:{text:""},on:{click:e.close}},[e._v("Close")]),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{disabled:e.loading,text:"",color:"primary",loading:e.loading},on:{click:e.save}},[e._v("Submit")])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{loader:!1,headers:[{text:"Id#",value:"id"},{text:"Role",value:"name"},{text:"Description",value:"description"},{text:"Created On",value:"created_at"},{text:"Actions",value:"actions"}],search:""}},methods:{openShow:function(e){},openAdd:function(){eventBus.$emit("openCreateRoleEvent")},openEdit:function(e){console.log(e),eventBus.$emit("openEditRoleEvent",e)},deleteItem:function(e){var t=this;confirm("Are you sure you want to delete this item?")&&(this.message="Deleting...",this.color="indigo",this.snackbar=!0,this.color="indigo",axios.delete("/roles/".concat(e)).then((function(e){t.snackbar=!1,t.AllRoles.splice(index,1),t.message="deleted successifully",t.color="red",t.snackbar=!0})).catch((function(e){t.snackbar=!1,t.message="something went wrong",t.color="red",t.snackbar=!0,t.errors=e.response.data.errors})))},getRoles:function(){var e=this;this.$store.dispatch("getRoles").then((function(){e.loader=!1}))}},mounted:function(){this.loader=!0,this.getRoles()},computed:{roles:function(){return this.$store.getters.roles},isLoading:function(){return this.$store.getters.loading}},beforeRouteEnter:function(e,t,o){o((function(e){e.user.can["Role view"]?o():o("/")}))}},d=Object(l.a)(u,(function(){var e=this,t=e._self._c;return t("div",[t("v-container",{attrs:{fluid:"","fill-height":""}},[t("v-layout",{attrs:{"justify-center":"","align-center":""}},[t("v-card",{staticStyle:{width:"100%"}},[t("v-card-title",[e._v("\n                        Roles\n                        "),e.user.can["Role create"]?t("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.openAdd}},[e._v("Add Roles")]):e._e(),e._v(" "),t("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(o){var s=o.on;return[t("v-btn",e._g({staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:e.getRoles},slot:"activator"},s),[t("v-icon",{attrs:{color:"blue darken-2",small:""}},[e._v("mdi-refresh")])],1)]}}])},[e._v(" "),t("span",[e._v("Refresh")])]),e._v(" "),t("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),t("v-flex",{attrs:{sm12:""}},[t("v-data-table",{attrs:{headers:e.headers,items:e.roles,search:e.search},scopedSlots:e._u([{key:"item.actions",fn:function(o){var s=o.item;return[e.user.can["Role edit"]?t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(o){var r=o.on;return[t("v-btn",e._g({staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(t){return e.openEdit(s)}},slot:"activator"},r),[t("v-icon",{attrs:{small:"",color:"blue darken-2"}},[e._v("mdi-pen")])],1)]}}],null,!0)},[e._v(" "),t("span",[e._v("Edit "+e._s(s.name))])]):e._e(),e._v(" "),e.user.can["Role delete"]?t("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(o){var r=o.on;return[t("v-btn",e._g({staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(t){return e.confirm_delete(s)}},slot:"activator"},r),[t("v-icon",{attrs:{small:"",color:"pink darken-2"}},[e._v("mdi-delete")])],1)]}}],null,!0)},[e._v(" "),t("span",[e._v("Delete "+e._s(s.name))])]):e._e()]}}])})],1)],1)],1)],1),e._v(" "),t("myCreate"),e._v(" "),t("myEdit")],1)}),[],!1,null,null,null);t.default=d.exports}}]);