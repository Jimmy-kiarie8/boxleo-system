(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1134:function(t,e,a){"use strict";a.r(e);var r=a(1),n=a.n(r),o=a(46),s={props:["form"],extends:o.b,data:function(){return{label:[],rows:[]}},mounted:function(){this.getChartSummary()},methods:{getChartSummary:function(){var t=this,e={model:"sales_chart?ou="+this.form.ou+"&year="+this.form.year,update:"updateSaleChartList"};this.$store.dispatch("getItems",e).then((function(e){t.label=e.data.data.lables,t.rows=e.data.data.rows,t.setGraph()}))},setGraph:function(){this.renderChart({labels:this.label,datasets:[{label:"Orders",backgroundColor:"#6b61dea1",data:this.rows}]},{responsive:!0,maintainAspectRatio:!1})},ref:function(t){var e=this;axios.post("/getChartData",t).then((function(t){e.label=t.data.data.lables,e.rows=t.data.data.rows,e.setGraph()})).catch((function(t){e.errors=t.response.data.errors}))}},created:function(){var t=this;eventBus.$on("chartEvent",(function(e){t.label=e.lables,t.data=e.rows})),eventBus.$on("DashchartEvent",(function(e){t.ref(e)})),eventBus.$on("SaleRefreshEvent",(function(e){t.getChartSummary()}))}},i={extends:o.b,data:function(){return{label:[],rows:[]}},mounted:function(){this.getDeliveryChart()},methods:{getDeliveryChart:function(){var t=this;this.$store.dispatch("getItems",{model:"delivery_chart",update:"updateDeliveryChart"}).then((function(e){t.label=e.data.data.lables,t.rows=e.data.data.rows,t.setGraph()}))},setGraph:function(){this.renderChart({labels:this.label,datasets:[{label:"Delivered",backgroundColor:"#28a165",data:this.rows}]},{responsive:!0,maintainAspectRatio:!1})},ref:function(t){var e=this;axios.post("/getChartDelivered",t).then((function(t){e.label=t.data.data.lables,e.rows=t.data.data.rows,e.setGraph()})).catch((function(t){e.errors=t.response.data.errors}))}},created:function(){var t=this;eventBus.$on("chartEvent",(function(e){t.label=e.lables,t.data=e.rows})),eventBus.$on("DashchartEvent",(function(e){t.ref(e)}))}},l={extends:o.b,data:function(){return{label:[],rows:[]}},mounted:function(){this.getReturnChart()},methods:{getReturnChart:function(){var t=this;this.$store.dispatch("getItems",{model:"return_chart",update:"updateReturnChart"}).then((function(e){t.label=e.data.data.lables,t.rows=e.data.data.rows,t.setGraph()}))},setGraph:function(){this.renderChart({labels:this.label,datasets:[{label:"Returned",backgroundColor:"#ff0000bf",data:this.rows}]},{responsive:!0,maintainAspectRatio:!1})},ref:function(t){var e=this;axios.post("/getChartCancled",t).then((function(t){e.label=t.data.data.lables,e.rows=t.data.data.rows,e.setGraph()})).catch((function(t){e.errors=t.response.data.errors}))}},created:function(){var t=this;eventBus.$on("chartEvent",(function(e){t.label=e.lables,t.data=e.rows})),eventBus.$on("DashchartEvent",(function(e){t.ref(e)}))}},c=a(2),d=a(7),v=a.n(d);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){h(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function h(t,e,a){return(e=function(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var _={props:["user"],components:{myChart:s,myDelivered:i,myReturn:l},data:function(){return{menu:!1,startDate:null,endDate:null,loaded:!1,align:"center",pickerOptions:{shortcuts:[{text:"Last week",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"Last month",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"Last 3 months",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}},{text:"Last 6 months",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-15552e6),t.$emit("pick",[a,e])}},{text:"Last year",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-31536e6),t.$emit("pick",[a,e])}}]},selectedItem:1,vendor_performance:null,active_chart:{active:154,inactive:26},monday_sale:null,form:{year:(new Date).getFullYear(),ou_id:"",date_range:[],filter_type:"year",month:""},options:[{value:"2018",label:"2018"},{value:"2019",label:"2019"},{value:"2020",label:"2020"}],currency_code:"KES"}},methods:{applyDateRange:function(){this.getDashboardData(),this.menu=!1},resetDateRange:function(){this.form.date_range=null,this.updateDateRangeText()},updateDateRangeText:function(){this.form.date_range?this.dateRangeText="".concat(this.form.date_range.toLocaleDateString()):this.dateRangeText=""},openOrders:function(t){this.$router.push({name:"tracking",query:{data:t}})},dateRange:function(t){var e=this;console.log(t);var a={model:"vendorPerformance",update:"updateEmpty",data:t};this.$store.dispatch("postItems",a).then((function(t){e.vendor_performance=t.data}))},getOus:function(){this.$store.dispatch("getItems",{model:"ous",update:"updateOu"}).then((function(t){}))},getDashboardData:function(){var t=this,e={model:"dashboard_count?ou="+this.form.ou+"&year="+this.form.year+"&daterange="+JSON.stringify(this.form.date_range)+"&filter="+this.form.filter_type,update:"updateDashboard"};this.$store.dispatch("getItems",e).then((function(){t.loaded=!0}))},getVendorPerformance:function(){var t=this;v.a.get("vendor_performance?ou="+this.form.ou+"&year="+this.form.year+"&daterange="+JSON.stringify(this.form.date_range)+"&filter="+this.form.filter_type).then((function(e){t.vendor_performance=e.data})).catch((function(t){console.log("ðŸš€ ~ file: analytics.vue:520 ~ axios.get ~ error:",t)}))}},computed:m(m({},Object(c.b)(["dashboard_data","ous"])),{},{dateRangeText:function(){return this.form.date_range?this.form.date_range.join(" ~ "):""}}),mounted:function(){this.getDashboardData(),this.getVendorPerformance(),this.getOus()},created:function(){var t=this;this.form.ou_id=this.user.ou_id,eventBus.$on("Refreshdashboard",(function(e){t.getDashboardData()}))},beforeDestroy:function(){clearInterval(this.timer)},filters:{moment:function(t){return n()(t).format("ddd, MMM Do YYYY")}},beforeRouteEnter:function(t,e,a){a((function(t){"Agent"==t.user.roles[0].name?a("/agent-dashboard"):"Call center"==t.user.roles[0].name?a("/call-center"):a()}))}},p=(a(741),a(0)),g=Object(p.a)(_,(function(){var t=this,e=t._self._c;return e("v-card",{staticClass:"analytics",staticStyle:{background:"#283046"},attrs:{elevation:""}},[e("v-row",[e("v-col",{staticStyle:{"margin-left":"20px"},attrs:{cols:"12",lg:"6"}},[e("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(a){var r=a.on;return[e("v-text-field",t._g({attrs:{label:"Select Date Range",color:"white"},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}},r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e("v-card",[e("v-card-text",[e("v-date-picker",{attrs:{range:"",color:"teal"},model:{value:t.form.date_range,callback:function(e){t.$set(t.form,"date_range",e)},expression:"form.date_range"}})],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"primary"},on:{click:t.applyDateRange}},[t._v("Apply")])],1)],1)],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"20px"},attrs:{cols:"12",lg:"5"}},[e("v-select",{attrs:{color:"white","append-outer-icon":"mdi-map",items:t.ous,label:"Operationg unit","item-text":"ou","item-value":"id",outlined:""},on:{change:t.getDashboardData},model:{value:t.form.ou,callback:function(e){t.$set(t.form,"ou",e)},expression:"form.ou"}})],1)],1),t._v(" "),t.loaded?e("v-row",{attrs:{align:t.align,"no-gutters":""}},[e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#28c76f"}},[e("v-icon",{attrs:{color:"#28c76f"}},[t._v("mdi-check-circle")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.dashboard_data.week_delivered.count))]),t._v(" "),e("small",[t._v("Delivered Last 1 week")])],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",[e("v-sheet",{attrs:{color:"#283046"}},[e("v-sparkline",{attrs:{value:t.dashboard_data.week_delivered.data,color:"#fff",height:"100",padding:"24","stroke-linecap":"round",smooth:16,gradient:["#283046","#28c76f","#1feaea"],"line-width":3},scopedSlots:t._u([{key:"label",fn:function(e){return[t._v("\n                                "+t._s(e.value)+"\n                            ")]}}],null,!1,2086850111)})],1)],1)],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#3366cc"}},[e("v-icon",{attrs:{color:"#3366cc"}},[t._v("mdi-alarm-multiple")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.dashboard_data.week_scheduled.count))]),t._v(" "),e("small",[t._v("Scheduled Last 1 week")])],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",[e("v-sheet",{attrs:{color:"#283046"}},[e("v-sparkline",{attrs:{value:t.dashboard_data.week_scheduled.data,color:"#fff",height:"100",padding:"24","stroke-linecap":"round",smooth:16,gradient:["#283046","#3366cc","#1feaea"],"line-width":3},scopedSlots:t._u([{key:"label",fn:function(e){return[t._v("\n                                "+t._s(e.value)+"\n                            ")]}}],null,!1,2086850111)})],1)],1)],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#1dc5bd"}},[e("v-icon",{attrs:{color:"#1dc5bd"}},[t._v("mdi-bike-fast")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.dashboard_data.week_dispatched.count))]),t._v(" "),e("small",[t._v("In Transit Last 1 week")])],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",[e("v-sheet",{attrs:{color:"#283046"}},[e("v-sparkline",{attrs:{value:t.dashboard_data.week_dispatched.data,color:"#fff",height:"100",padding:"24","stroke-linecap":"round",smooth:16,gradient:["#283046","#1dc5bd","#1feaea"],"line-width":3},scopedSlots:t._u([{key:"label",fn:function(e){return[t._v("\n                                "+t._s(e.value)+"\n                            ")]}}],null,!1,2086850111)})],1)],1)],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#ff0000bf"}},[e("v-icon",{attrs:{color:"#ff0000bf"}},[t._v("mdi-keyboard-return")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.dashboard_data.week_returned.count))]),t._v(" "),e("small",[t._v("Returned Last 1 week")])],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",[e("v-sheet",{attrs:{color:"#283046"}},[e("v-sparkline",{attrs:{value:t.dashboard_data.week_returned.data,color:"#fff",height:"100",padding:"24","stroke-linecap":"round",smooth:16,gradient:["#283046","#ff0000bf","#1feaea"],"line-width":3},scopedSlots:t._u([{key:"label",fn:function(e){return[t._v("\n                                "+t._s(e.value)+"\n                            ")]}}],null,!1,2086850111)})],1)],1)],1)],1)],1):t._e(),t._v(" "),e("v-divider"),t._v(" "),t.loaded?e("v-row",{attrs:{align:t.align,"no-gutters":""}},[e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#28c76f"}},[e("v-icon",{attrs:{color:"#28c76f"}},[t._v("mdi-check-circle")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.dashboard_data.delivered_count))]),t._v(" "),e("small",[t._v("Delivered")])],1)],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#3366cc"}},[e("v-icon",{attrs:{color:"#3366cc"}},[t._v("mdi-alarm-multiple")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.dashboard_data.scheduled_count))]),t._v(" "),e("small",[t._v("Scheduled")])],1)],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#1dc5bd"}},[e("v-icon",{attrs:{color:"#1dc5bd"}},[t._v("mdi-bike-fast")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.dashboard_data.dispatched_count))]),t._v(" "),e("small",[t._v("In Transit")])],1)],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#ff0000bf"}},[e("v-icon",{attrs:{color:"#ff0000bf"}},[t._v("mdi-keyboard-return")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.dashboard_data.returns_count))]),t._v(" "),e("small",[t._v("Returned")])],1)],1)],1)],1):t._e(),t._v(" "),e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"left"}},[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#28c76f"}},[e("v-icon",{attrs:{color:"#28c76f"}},[t._v("mdi-cart-outline")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.dashboard_data.week_delivered.count))]),t._v(" "),e("small",[t._v("Avg Delivery this week")]),t._v(" "),e("h2",[e("b",{style:[t.dashboard_data.perc_delivery>0?{color:"#28c76f"}:{color:"#ff0000bf"}]},[t._v(t._s(t.dashboard_data.perc_delivery)+"%")]),t._v(" vs last 7 days")]),t._v(" "),e("v-btn",{attrs:{elevation:"2",color:"#28c76f",to:"/report"}},[t._v("Go to reports")])],1),t._v(" "),e("v-col",[e("myDelivered",{attrs:{height:255}})],1)],1)],1)],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"2px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"left"}},[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#ff0000bf"}},[e("v-icon",{attrs:{color:"#ff0000bf"}},[t._v("mdi-arrow-right")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.dashboard_data.week_returned.count))]),t._v(" "),e("small",[t._v("Avg returns this week")]),t._v(" "),e("h2",[e("b",{style:[t.dashboard_data.perc_return>0?{color:"#ff0000bf"}:{color:"#28c76f"}]},[t._v(t._s(t.dashboard_data.perc_return)+"%")]),t._v(" vs last 7 days")]),t._v(" "),e("v-btn",{attrs:{elevation:"2",color:"#ff0000bf",to:"/report"}},[t._v("Go to reports")])],1),t._v(" "),e("v-col",[e("myReturn",{attrs:{height:255}})],1)],1)],1)],1)],1)],1),t._v(" "),e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"center"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"3"}},[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#6b61dea1"}},[e("v-icon",{attrs:{color:"#6b61dea1"}},[t._v("mdi-cart-outline")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.dashboard_data.total_sales_count))]),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v("Total orders")]),t._v(" "),e("v-btn",{attrs:{elevation:"2",color:"#6b61dea1",to:"/report"}},[t._v("Go to reports")])],1),t._v(" "),e("v-col",{attrs:{cols:"9"}},[e("myChart",{attrs:{height:255,form:t.form}})],1)],1)],1)],1)],1),t._v(" "),t.user.is_vendor?t._e():e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("h2",[t._v("PRODUCT DETAILS")]),t._v(" "),e("v-divider"),t._v(" "),e("ul",{staticClass:"list-group"},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{sm6:""}},[e("v-list",{staticStyle:{background:"#283046"},attrs:{dense:""}},[e("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[e("v-list-item",[e("v-list-item-icon",{staticStyle:{"margin-top":"18px !important","margin-right":"0 !important"}},[e("v-icon",[t._v("mdi-basket")])],1),t._v(" "),e("v-list-item-content",{staticStyle:{"margin-left":"0px !important"}},[e("v-list-item-title",[t._v("Products")])],1),t._v(" "),e("v-list-item-action",[e("v-btn",{attrs:{text:"",color:"primary"}},[t._v("\n                                                "+t._s(t.dashboard_data.product_count)+"\n                                            ")])],1)],1),t._v(" "),e("v-list-item",[e("v-list-item-icon",{staticStyle:{"margin-top":"18px !important","margin-right":"0 !important"}},[e("v-icon",[t._v("mdi-account-circle")])],1),t._v(" "),e("v-list-item-content",{staticStyle:{"margin-left":"0px !important"}},[e("v-list-item-title",[t._v("Users")])],1),t._v(" "),e("v-list-item-action",[e("v-btn",{attrs:{text:"",color:"primary"}},[t._v("\n                                                "+t._s(t.dashboard_data.user_count)+"\n                                            ")])],1)],1)],1)],1)],1),t._v(" "),e("v-flex",{attrs:{sm6:""}},[e("pie-chart",{staticStyle:{height:"200px"},attrs:{data:t.dashboard_data.active_chart}})],1)],1)],1)],1)],1),t._v(" "),e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("div",{staticClass:"block"},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"monthrange",align:"right","unlink-panels":"","range-separator":"To","start-placeholder":"Start month","end-placeholder":"End month","picker-options":t.pickerOptions},on:{change:t.dateRange},model:{value:t.form.month,callback:function(e){t.$set(t.form,"month",e)},expression:"form.month"}})],1),t._v(" "),e("h2",[t._v("Vendor Performance")]),t._v(" "),e("v-divider"),t._v(" "),e("v-simple-table",{staticStyle:{"text-align":"left"},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("\n                                    Name\n                                ")]),t._v(" "),e("th",{staticClass:"text-left"},[t._v("\n                                    Orders\n                                ")]),t._v(" "),e("th",{staticClass:"text-left"},[t._v("\n                                    Delivered\n                                ")]),t._v(" "),e("th",{staticClass:"text-left"},[t._v("\n                                    Returned\n                                ")])])]),t._v(" "),t.vendor_performance?e("tbody",t._l(t.vendor_performance,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.name))]),t._v(" "),e("td",[t._v(t._s(a.sales_count))]),t._v(" "),e("td",[t._v(t._s(a.delivered_count)+"\n                                    "),e("el-tag",{staticStyle:{float:"right"},attrs:{effect:"dark",size:"mini",type:"info"}},[t._v(t._s(parseFloat(a.delivered_count/a.sales_count*100).toFixed(2))+"%")])],1),t._v(" "),e("td",[t._v(t._s(a.returned_count)+"\n                                    "),e("el-tag",{staticStyle:{float:"right"},attrs:{effect:"dark",size:"mini",type:"danger"}},[t._v(t._s(parseFloat(a.returned_count/a.sales_count*100).toFixed(2))+"% ")])],1)])})),0):e("tbody",t._l(t.dashboard_data.vendor_performance,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.name))]),t._v(" "),e("td",[t._v(t._s(a.sales_count))]),t._v(" "),e("td",[t._v(t._s(a.delivered_count)+"\n                                    "),e("el-tag",{staticStyle:{float:"right"},attrs:{effect:"dark",size:"mini",type:"info"}},[t._v(t._s(parseFloat(a.delivered_count/a.sales_count*100).toFixed(2))+"%")])],1),t._v(" "),e("td",[t._v(t._s(a.returned_count)+"\n                                    "),e("el-tag",{staticStyle:{float:"right"},attrs:{effect:"dark",size:"mini",type:"danger"}},[t._v(t._s(parseFloat(a.returned_count/a.sales_count*100).toFixed(2))+"% ")])],1)])})),0)]},proxy:!0}],null,!1,4014384531)})],1)],1)],1)],1)}),[],!1,null,"0c920f1e",null);e.default=g.exports},1135:function(t,e,a){"use strict";a.r(e);var r=a(1),n=a.n(r),o=a(46),s={extends:o.a,data:function(){return{label:[],rows:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.$store.dispatch("getItems",{model:"agent_chart/Cancelled",update:"updateAgentChart"}).then((function(e){console.log("ðŸš€ ~ file: cancelled.js:22 ~ this.$store.dispatch ~ response:",e),t.label=e.data.data.lables,t.rows=e.data.data.rows,t.setGraph()}))},setGraph:function(){this.renderChart({labels:this.label,datasets:[{label:"Cancelled",backgroundColor:"#ff0000bf",data:this.rows}]},{responsive:!0,maintainAspectRatio:!1})}},created:function(){var t=this;eventBus.$on("chartEvent",(function(e){t.label=e.lables,t.data=e.rows})),eventBus.$on("DashchartEvent",(function(e){t.ref(e)}))}},i={extends:o.a,data:function(){return{label:[],rows:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.$store.dispatch("getItems",{model:"callcentre",update:"updateStatusChart"}).then((function(e){t.label=e.data.data.lables,t.rows=e.data.data.rows,t.setGraph()}))},setGraph:function(){this.renderChart({labels:this.label,datasets:[{label:"Count",backgroundColor:["#28a165","#ff0000","#6b61dea1","#00ff00","#ff00ff"].slice(0,this.rows.length),data:this.rows}]},{responsive:!0,maintainAspectRatio:!1})}},created:function(){var t=this;eventBus.$on("chartEvent",(function(e){t.label=e.lables,t.data=e.rows})),eventBus.$on("DashchartEvent",(function(e){t.ref(e)}))}},l={extends:o.a,data:function(){return{label:[],rows:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.$store.dispatch("getItems",{model:"agent_chart/Scheduled",update:"updateAgentChart"}).then((function(e){console.log("ðŸš€ ~ file: cancelled.js:22 ~ this.$store.dispatch ~ response:",e),t.label=e.data.data.lables,t.rows=e.data.data.rows,t.setGraph()}))},setGraph:function(){this.renderChart({labels:this.label,datasets:[{label:"Scheduled",backgroundColor:"#1976d2",data:this.rows}]},{responsive:!0,maintainAspectRatio:!1})}},created:function(){var t=this;eventBus.$on("chartEvent",(function(e){t.label=e.lables,t.data=e.rows})),eventBus.$on("DashchartEvent",(function(e){t.ref(e)}))}},c=a(2);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return(e=function(t){var e=function(t,e){if("object"!=d(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m={props:["user"],components:{myStatus:i,myCancelled:s,myScheduled:l},data:function(){return{menu:!1,loaded:!1,align:"center",pickerOptions:{shortcuts:[{text:"Last week",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"Last month",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"Last 3 months",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}},{text:"Last 6 months",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-15552e6),t.$emit("pick",[a,e])}},{text:"Last year",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-31536e6),t.$emit("pick",[a,e])}}]},selectedItem:1,active_chart:{active:154,inactive:26},monday_sale:null,form:{year:(new Date).getFullYear(),ou_id:"",stat_date:new Date,filter_type:"year",month:"",date_range:[]},options:[{value:"2018",label:"2018"},{value:"2019",label:"2019"},{value:"2020",label:"2020"}],currency_code:"KES",purpleLineChart:{extraOptions:{maintainAspectRatio:!1,legend:{display:!1},responsive:!0,tooltips:{backgroundColor:"#f5f5f5",titleFontColor:"#333",bodyFontColor:"#666",bodySpacing:4,xPadding:12,mode:"nearest",intersect:0,position:"nearest"},scales:{yAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(29,140,248,0.0)",zeroLineColor:"transparent"},ticks:{suggestedMin:50,suggestedMax:110,padding:20,fontColor:"#ff8a76"}}],xAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(220,53,69,0.1)",zeroLineColor:"transparent"},ticks:{padding:20,fontColor:"#ff8a76"}}]}},chartData:{labels:[],datasets:[{label:"Data",fill:!0,borderColor:"#d048b6",borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:"#d048b6",pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:"#d048b6",pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:[]}]}}}},methods:{applyDateRange:function(){this.getDashboardData(),this.menu=!1},resetDateRange:function(){this.form.date_range=null,this.updateDateRangeText()},updateDateRangeText:function(){this.form.date_range?this.dateRangeText="".concat(this.form.date_range.toLocaleDateString()):this.dateRangeText=""},handlePageChange:function(t){var e={data:[],path:"/callcentre_performance",page:t,update:"updateCallcentrePerformance"};this.$store.dispatch("nextPagePost",e)},performance:function(){this.$store.dispatch("getItems",{model:"callcentre_performance",update:"updateCallcentrePerformance"}).then((function(t){}))},fetchData:function(){},openOrders:function(t){this.$router.push({name:"tracking",query:{data:t}})},dateRange:function(t){var e=this;console.log(t);var a={model:"vendorPerformance",update:"updateEmpty",data:t};this.$store.dispatch("postItems",a).then((function(t){e.callcentre_performance=t.data}))},getOus:function(){this.$store.dispatch("getItems",{model:"ous",update:"updateOu"}).then((function(t){}))},getDashboardData:function(){var t=this,e={model:"callcenter_dashboard?ou="+this.form.ou+"&year="+this.form.year+"&daterange="+JSON.stringify(this.form.date_range)+"&filter="+this.form.filter_type,update:"updateCallDashboard"};this.$store.dispatch("getItems",e).then((function(){t.loaded=!0}))},getUsers:function(){this.$store.dispatch("getItems",{model:"agents",update:"updateUsersList"})}},computed:u(u({},Object(c.b)(["call_center","ous","users","callcentre_performance"])),{},{currentMonth:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"][(new Date).getMonth()]},dateRangeText:function(){return this.form.date_range?this.form.date_range.join(" ~ "):""}}),mounted:function(){this.getDashboardData(),this.getOus(),this.performance()},created:function(){var t=this;this.form.ou_id=this.user.ou_id,eventBus.$on("Refreshdashboard",(function(e){t.getDashboardData()}))},beforeDestroy:function(){clearInterval(this.timer)},filters:{moment:function(t){return n()(t).format("ddd, MMM Do YYYY")}}},h=(a(743),a(0)),_=Object(h.a)(m,(function(){var t=this,e=t._self._c;return e("v-card",{staticClass:"analytics",staticStyle:{background:"#283046","padding-bottom":"30px"},attrs:{elevation:""}},[e("v-row",[e("v-col",{staticStyle:{"margin-left":"20px"},attrs:{cols:"12",lg:"6"}},[e("v-menu",{attrs:{"close-on-content-click":!1,"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(a){var r=a.on;return[e("v-text-field",t._g({staticStyle:{color:"#c5c5c5 !important"},attrs:{label:"Select Date Range"},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}},r))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),e("v-card",[e("v-card-text",[e("v-date-picker",{attrs:{range:"",color:"teal"},model:{value:t.form.date_range,callback:function(e){t.$set(t.form,"date_range",e)},expression:"form.date_range"}})],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"primary"},on:{click:t.applyDateRange}},[t._v("Apply")])],1)],1)],1)],1)],1),t._v(" "),t.loaded?e("v-row",{attrs:{align:t.align,"no-gutters":""}},[e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#3366cc"}},[e("v-icon",{attrs:{color:"#3366cc"}},[t._v("mdi-tooltip-plus-outline")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.call_center.orders))]),t._v(" "),e("small",[t._v("Total Orders today")])],1),t._v(" "),e("v-divider")],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#28c76f"}},[e("v-icon",{attrs:{color:"#28c76f"}},[t._v("mdi-check-circle")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.call_center.delivered))]),t._v(" "),e("small",[t._v(t._s(t.currentMonth)+" Deliveries")])],1),t._v(" "),e("v-divider")],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#ff0000bf"}},[e("v-icon",{attrs:{color:"#ff0000bf"}},[t._v("mdi-close-box")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.call_center.cancelled))]),t._v(" "),e("small",[t._v("Cancelled Orders")])],1),t._v(" "),e("v-divider")],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#1dc5bd"}},[e("v-icon",{attrs:{color:"#1dc5bd"}},[t._v("mdi-arrow-right")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.call_center.pending))]),t._v(" "),e("small",[t._v("Pending Orders")])],1),t._v(" "),e("v-divider")],1)],1)],1):t._e(),t._v(" "),e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"left"}},[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#28c76f"}},[e("v-icon",{attrs:{color:"#28c76f"}},[t._v("mdi-cart-outline")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.call_center.scheduled))]),t._v(" "),e("small",[t._v("Avg Schedule rate")]),t._v(" "),e("h2",[e("b",{style:[t.call_center.perc_delivery>0?{color:"#28c76f"}:{color:"#ff0000bf"}]},[t._v(t._s(t.call_center.schedule_rate)+"%")])])],1),t._v(" "),e("v-col",[e("myScheduled",{attrs:{height:255}})],1)],1)],1)],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"2px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"left"}},[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#ff0000bf"}},[e("v-icon",{attrs:{color:"#ff0000bf"}},[t._v("mdi-arrow-right")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.call_center.cancelled))]),t._v(" "),e("small",[t._v("Avg Cancel rate")]),t._v(" "),e("h2",[e("b",{style:[t.call_center.perc_return>0?{color:"#ff0000bf"}:{color:"#28c76f"}]},[t._v(t._s(t.call_center.cancel_rate)+"%")])])],1),t._v(" "),e("v-col",[e("myCancelled",{attrs:{height:255}})],1)],1)],1)],1)],1)],1),t._v(" "),e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"center"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"3"}},[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#6b61dea1"}},[e("v-icon",{attrs:{color:"#6b61dea1"}},[t._v("mdi-cart-outline")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.call_center.call_rate))]),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v("Avarage Call time")])],1),t._v(" "),e("v-col",{attrs:{cols:"9"}},[e("myStatus",{attrs:{height:255,form:t.form}})],1)],1)],1)],1)],1),t._v(" "),t.user.is_vendor?t._e():e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("h2",[t._v("Call Details")]),t._v(" "),e("v-divider"),t._v(" "),e("ul",{staticClass:"list-group"},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{sm6:""}},[e("v-list",{staticStyle:{background:"#283046"},attrs:{dense:""}},[e("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[e("v-list-item",[e("v-list-item-icon",{staticStyle:{"margin-top":"18px !important","margin-right":"0 !important"}},[e("v-icon",[t._v("mdi-quality-low")])],1),t._v(" "),e("v-list-item-content",{staticStyle:{"margin-left":"0px !important"}},[e("v-list-item-title",[t._v("Call abandonment rate")])],1),t._v(" "),e("v-list-item-action",[e("v-btn",{attrs:{text:"",color:"primary"}},[t._v("\n                                                "+t._s(t.call_center.abandonment_rate)+"\n                                            ")])],1)],1),t._v(" "),e("v-list-item",[e("v-list-item-icon",{staticStyle:{"margin-top":"18px !important","margin-right":"0 !important"}},[e("v-icon",[t._v("mdi-basket")])],1),t._v(" "),e("v-list-item-content",{staticStyle:{"margin-left":"0px !important"}},[e("v-list-item-title",[t._v("First call resolution rate")])],1),t._v(" "),e("v-list-item-action",[e("v-btn",{attrs:{text:"",color:"primary"}},[t._v("\n                                                "+t._s(t.call_center.resolution_rate)+"\n                                            ")])],1)],1),t._v(" "),e("v-list-item",[e("v-list-item-icon",{staticStyle:{"margin-top":"18px !important","margin-right":"0 !important"}},[e("v-icon",[t._v("mdi-account-circle")])],1),t._v(" "),e("v-list-item-content",{staticStyle:{"margin-left":"0px !important"}},[e("v-list-item-title",[t._v("Call volume")])],1),t._v(" "),e("v-list-item-action",[e("v-btn",{attrs:{text:"",color:"primary"}},[t._v("\n                                                "+t._s(t.call_center.volume)+"\n                                            ")])],1)],1)],1)],1)],1),t._v(" "),e("v-flex",{attrs:{sm6:""}},[e("pie-chart",{staticStyle:{height:"200px"},attrs:{data:t.call_center.active_chart}})],1)],1)],1)],1)],1),t._v(" "),e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("h2",[t._v("Agent Performance")]),t._v(" "),e("v-divider"),t._v(" "),e("v-simple-table",{staticStyle:{"text-align":"left"},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("\n                                    Name\n                                ")]),t._v(" "),e("th",{staticClass:"text-left"},[t._v("\n                                    Orders\n                                ")]),t._v(" "),e("th",{staticClass:"text-left"},[t._v("\n                                    Scheduled\n                                ")]),t._v(" "),e("th",{staticClass:"text-left"},[t._v("\n                                    Cancelled\n                                ")])])]),t._v(" "),e("tbody",t._l(t.callcentre_performance.data,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.name))]),t._v(" "),e("td",[t._v(t._s(a.assign_count))]),t._v(" "),e("td",[t._v(t._s(a.schedule_count)+"\n                                    "),e("el-tag",{staticStyle:{float:"right"},attrs:{effect:"dark",size:"mini",type:"info"}},[t._v(t._s(parseFloat(a.schedule_count/a.assign_count*100).toFixed(2))+"%")])],1),t._v(" "),e("td",[t._v(t._s(a.cancelled_count)+"\n                                    "),e("el-tag",{staticStyle:{float:"right"},attrs:{effect:"dark",size:"mini",type:"danger"}},[t._v(t._s(parseFloat(a.cancelled_count/a.assign_count*100).toFixed(2))+"% ")])],1)])})),0),t._v(" "),t.callcentre_performance.last_page>1?e("el-pagination",{attrs:{"current-page":t.callcentre_performance.current_page,"page-size":t.callcentre_performance.per_page,total:t.callcentre_performance.total,layout:"prev, pager, next"},on:{"current-change":t.handlePageChange}}):t._e()]},proxy:!0}],null,!1,226441351)})],1)],1)],1)],1)}),[],!1,null,"f5b8d332",null);e.default=_.exports},1136:function(t,e,a){"use strict";a.r(e);var r=a(1),n=a.n(r),o=a(46),s={extends:o.a,data:function(){return{label:[],rows:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.$store.dispatch("getItems",{model:"agent_dashboard_chart/Returned",update:"updateAgentChart"}).then((function(e){t.label=e.data.data.lables,t.rows=e.data.data.rows,t.setGraph()}))},setGraph:function(){this.renderChart({labels:this.label,datasets:[{label:"Returned",backgroundColor:"#f00",data:this.rows}]},{responsive:!0,maintainAspectRatio:!1})}},created:function(){var t=this;eventBus.$on("chartEvent",(function(e){t.label=e.lables,t.data=e.rows})),eventBus.$on("DashchartEvent",(function(e){t.ref(e)}))}},i={extends:o.a,data:function(){return{label:[],rows:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.$store.dispatch("getItems",{model:"agents_charts",update:"updateStatusChart"}).then((function(e){t.label=e.data.data.lables,t.rows=e.data.data.rows,t.setGraph()}))},setGraph:function(){this.renderChart({labels:this.label,datasets:[{label:"Count",backgroundColor:["#28a165","#ff0000","#6b61dea1","#00ff00","#ff00ff"].slice(0,this.rows.length),data:this.rows}]},{responsive:!0,maintainAspectRatio:!1})}},created:function(){var t=this;eventBus.$on("chartEvent",(function(e){t.label=e.lables,t.data=e.rows})),eventBus.$on("DashchartEvent",(function(e){t.ref(e)}))}},l={extends:o.a,data:function(){return{label:[],rows:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.$store.dispatch("getItems",{model:"agent_dashboard_chart/Delivered",update:"updateAgentChart"}).then((function(e){console.log("ðŸš€ ~ file: cancelled.js:22 ~ this.$store.dispatch ~ response:",e),t.label=e.data.data.lables,t.rows=e.data.data.rows,t.setGraph()}))},setGraph:function(){this.renderChart({labels:this.label,datasets:[{label:"Delivered",backgroundColor:"#28a165",data:this.rows}]},{responsive:!0,maintainAspectRatio:!1})}},created:function(){var t=this;eventBus.$on("chartEvent",(function(e){t.label=e.lables,t.data=e.rows})),eventBus.$on("DashchartEvent",(function(e){t.ref(e)}))}},c=a(2);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return(e=function(t){var e=function(t,e){if("object"!=d(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m={props:["user"],components:{myStatus:i,myReturns:s,myDelivery:l},data:function(){return{loaded:!1,align:"center",pickerOptions:{shortcuts:[{text:"Last week",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"Last month",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"Last 3 months",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}},{text:"Last 6 months",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-15552e6),t.$emit("pick",[a,e])}},{text:"Last year",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-31536e6),t.$emit("pick",[a,e])}}]},selectedItem:1,active_chart:{active:154,inactive:26},monday_sale:null,form:{year:(new Date).getFullYear(),ou_id:"",stat_date:new Date,filter_type:"year",month:"",date:""},options:[{value:"2018",label:"2018"},{value:"2019",label:"2019"},{value:"2020",label:"2020"}],currency_code:"KES",purpleLineChart:{extraOptions:{maintainAspectRatio:!1,legend:{display:!1},responsive:!0,tooltips:{backgroundColor:"#f5f5f5",titleFontColor:"#333",bodyFontColor:"#666",bodySpacing:4,xPadding:12,mode:"nearest",intersect:0,position:"nearest"},scales:{yAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(29,140,248,0.0)",zeroLineColor:"transparent"},ticks:{suggestedMin:50,suggestedMax:110,padding:20,fontColor:"#ff8a76"}}],xAxes:[{barPercentage:1.6,gridLines:{drawBorder:!1,color:"rgba(220,53,69,0.1)",zeroLineColor:"transparent"},ticks:{padding:20,fontColor:"#ff8a76"}}]}},chartData:{labels:[],datasets:[{label:"Data",fill:!0,borderColor:"#d048b6",borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:"#d048b6",pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:"#d048b6",pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:[]}]}}}},methods:{handlePageChange:function(t){var e={data:[],path:"/agents_dashboard_performance",page:t,update:"updateAgentPerformance"};this.$store.dispatch("nextPagePost",e)},performance:function(){this.$store.dispatch("getItems",{model:"agents_dashboard_performance",update:"updateAgentPerformance"}).then((function(t){}))},fetchData:function(){},openOrders:function(t){this.$router.push({name:"tracking",query:{data:t}})},dateRange:function(t){var e=this;console.log(t);var a={model:"vendorPerformance",update:"updateEmpty",data:t};this.$store.dispatch("postItems",a).then((function(t){e.agent_performance=t.data}))},getOus:function(){this.$store.dispatch("getItems",{model:"ous",update:"updateOu"}).then((function(t){}))},getDashboardData:function(){var t=this,e={model:"agents_dashboard?ou="+this.form.ou+"&year="+this.form.year+"&daterange="+this.form.date_range+"&filter="+this.form.filter_type,update:"updateAgentData"};this.$store.dispatch("getItems",e).then((function(){t.loaded=!0}))},getUsers:function(){this.$store.dispatch("getItems",{model:"agents",update:"updateUsersList"})}},computed:u(u({},Object(c.b)(["agent_data","ous","users","agent_performance"])),{},{currentMonth:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"][(new Date).getMonth()]}}),mounted:function(){this.getDashboardData(),this.getOus(),this.getUsers(),this.performance()},created:function(){var t=this;this.form.ou_id=this.user.ou_id,eventBus.$on("Refreshdashboard",(function(e){t.getDashboardData()}))},beforeDestroy:function(){clearInterval(this.timer)},filters:{moment:function(t){return n()(t).format("ddd, MMM Do YYYY")}}},h=(a(745),a(0)),_=Object(h.a)(m,(function(){var t=this,e=t._self._c;return e("v-card",{staticClass:"analytics",staticStyle:{background:"#283046","padding-bottom":"30px"},attrs:{elevation:""}},[t.loaded?e("v-row",{attrs:{align:t.align,"no-gutters":""}},[e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#3366cc"}},[e("v-icon",{attrs:{color:"#3366cc"}},[t._v("mdi-tooltip-plus-outline")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.agent_data.orders))]),t._v(" "),e("small",[t._v("Total Orders")])],1),t._v(" "),e("v-divider")],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#28c76f"}},[e("v-icon",{attrs:{color:"#28c76f"}},[t._v("mdi-check-circle")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.agent_data.delivered))]),t._v(" "),e("small",[t._v(t._s(t.currentMonth)+" Deliveries")])],1),t._v(" "),e("v-divider")],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#ff0000bf"}},[e("v-icon",{attrs:{color:"#ff0000bf"}},[t._v("mdi-close-box")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.agent_data.returned))]),t._v(" "),e("small",[t._v("Returns")])],1),t._v(" "),e("v-divider")],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"3px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#1dc5bd"}},[e("v-icon",{attrs:{color:"#1dc5bd"}},[t._v("mdi-bike-fast")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.agent_data.in_transit))]),t._v(" "),e("small",[t._v("In Transit")])],1),t._v(" "),e("v-divider")],1)],1)],1):t._e(),t._v(" "),e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"left"}},[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#28c76f"}},[e("v-icon",{attrs:{color:"#28c76f"}},[t._v("mdi-cart-outline")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.agent_data.delivered))]),t._v(" "),e("small",[t._v("Avg Delivery rate")]),t._v(" "),e("h2",[e("b",{style:[t.agent_data.delivery_rate>40?{color:"#28c76f"}:{color:"#ff0000bf"}]},[t._v(t._s(t.agent_data.delivery_rate)+"%")])])],1),t._v(" "),e("v-col",[e("myDelivery",{attrs:{height:255}})],1)],1)],1)],1)],1),t._v(" "),e("v-col",{staticStyle:{"margin-left":"2px"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-card-text",[e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"left"}},[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#ff0000bf"}},[e("v-icon",{attrs:{color:"#ff0000bf"}},[t._v("mdi-arrow-right")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.agent_data.returned))]),t._v(" "),e("small",[t._v("Avg Return rate")]),t._v(" "),e("h2",[e("b",{style:[t.agent_data.return_rate<30?{color:"#ff0000bf"}:{color:"#28c76f"}]},[t._v(t._s(t.agent_data.return_rate)+"%")])])],1),t._v(" "),e("v-col",[e("myReturns",{attrs:{height:255}})],1)],1)],1)],1)],1)],1),t._v(" "),e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"center"}},[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"3"}},[e("v-btn",{staticClass:"ma-2",attrs:{outlined:"",fab:"",color:"#6b61dea1"}},[e("v-icon",{attrs:{color:"#6b61dea1"}},[t._v("mdi-cart-outline")])],1),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}},[t._v(t._s(t.agent_data.call_rate))]),t._v(" "),e("h2",{staticStyle:{color:"#d0d2d6","font-weight":"600!important","font-size":"1.714rem"}})],1),t._v(" "),e("v-col",{attrs:{cols:"9"}},[e("myStatus",{attrs:{height:255,form:t.form}})],1)],1)],1)],1)],1),t._v(" "),t.user.is_vendor?t._e():e("v-row",{staticStyle:{"margin-top":"2px"},attrs:{align:t.align,"no-gutters":""}},[e("v-col",[e("v-card",{staticClass:"mx-auto text-center",attrs:{color:"#283046",dark:""}},[e("h2",[t._v("Agent Performance")]),t._v(" "),e("v-divider"),t._v(" "),e("v-simple-table",{staticStyle:{"text-align":"left"},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("\n                                    Zone\n                                ")]),t._v(" "),e("th",{staticClass:"text-left"},[t._v("\n                                    Orders\n                                ")]),t._v(" "),e("th",{staticClass:"text-left"},[t._v("\n                                    Delivered\n                                ")]),t._v(" "),e("th",{staticClass:"text-left"},[t._v("\n                                    Returned\n                                ")]),t._v(" "),e("th",{staticClass:"text-left"},[t._v("\n                                    In Transit\n                                ")])])]),t._v(" "),e("tbody",t._l(t.agent_performance.data,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.zone))]),t._v(" "),e("td",[t._v(t._s(a.sales_count))]),t._v(" "),e("td",[t._v(t._s(a.delivered_count)+"\n                                    "),e("el-tag",{staticStyle:{float:"right"},attrs:{effect:"dark",size:"mini",type:"info"}},[t._v(t._s(parseFloat(a.delivered_count/a.sales_count*100).toFixed(2))+"%")])],1),t._v(" "),e("td",[t._v(t._s(a.returned_count)+"\n                                    "),e("el-tag",{staticStyle:{float:"right"},attrs:{effect:"dark",size:"mini",type:"danger"}},[t._v(t._s(parseFloat(a.returned_count/a.sales_count*100).toFixed(2))+"% ")])],1),t._v(" "),e("td",[t._v(t._s(a.in_transit)+"\n                                    "),e("el-tag",{staticStyle:{float:"right"},attrs:{effect:"dark",size:"mini",type:"danger"}},[t._v(t._s(parseFloat(a.in_transit/a.sales_count*100).toFixed(2))+"% ")])],1)])})),0),t._v(" "),t.agent_performance.last_page>1?e("el-pagination",{attrs:{"current-page":t.agent_performance.current_page,"page-size":t.agent_performance.per_page,total:t.agent_performance.total,layout:"prev, pager, next"},on:{"current-change":t.handlePageChange}}):t._e()]},proxy:!0}],null,!1,4287859981)})],1)],1)],1)],1)}),[],!1,null,"6d4ae1a5",null);e.default=_.exports},46:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return i}));var r=a(515),n=a.n(r);function o(t,e){return{render:function(t){return t("div",{style:this.styles,class:this.cssClasses},[t("canvas",{attrs:{id:this.chartId,width:this.width,height:this.height},ref:"canvas"})])},props:{chartId:{default:t,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:function(){return[]}}},data:function(){return{_chart:null,_plugins:this.plugins}},methods:{addPlugin:function(t){this.$data._plugins.push(t)},generateLegend:function(){if(this.$data._chart)return this.$data._chart.generateLegend()},renderChart:function(t,a){if(this.$data._chart&&this.$data._chart.destroy(),!this.$refs.canvas)throw new Error("Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components");this.$data._chart=new n.a(this.$refs.canvas.getContext("2d"),{type:e,data:t,options:a,plugins:this.$data._plugins})}},beforeDestroy:function(){this.$data._chart&&this.$data._chart.destroy()}}}var s=o("bar-chart","bar"),i=(o("horizontalbar-chart","horizontalBar"),o("doughnut-chart","doughnut"),o("line-chart","line"));o("pie-chart","pie"),o("polar-chart","polarArea"),o("radar-chart","radar"),o("bubble-chart","bubble"),o("scatter-chart","scatter")},601:function(t,e,a){var r=a(742);"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(4)(r,n);r.locals&&(t.exports=r.locals)},602:function(t,e,a){var r=a(744);"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(4)(r,n);r.locals&&(t.exports=r.locals)},603:function(t,e,a){var r=a(746);"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(4)(r,n);r.locals&&(t.exports=r.locals)},741:function(t,e,a){"use strict";a(601)},742:function(t,e,a){(t.exports=a(3)(!1)).push([t.i,".analytics .v-data-table[data-v-0c920f1e]{background:#283046}.theme--dark.v-divider[data-v-0c920f1e]{border-color:rgba(41,49,71,.7607843137254902)!important}",""])},743:function(t,e,a){"use strict";a(602)},744:function(t,e,a){(t.exports=a(3)(!1)).push([t.i,".analytics .v-data-table[data-v-f5b8d332]{background:#283046}.theme--dark.v-divider[data-v-f5b8d332]{border-color:rgba(41,49,71,.7607843137254902)!important}",""])},745:function(t,e,a){"use strict";a(603)},746:function(t,e,a){(t.exports=a(3)(!1)).push([t.i,".analytics .v-data-table[data-v-6d4ae1a5]{background:#283046}.theme--dark.v-divider[data-v-6d4ae1a5]{border-color:rgba(41,49,71,.7607843137254902)!important}",""])}}]);