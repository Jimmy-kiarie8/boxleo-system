(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{1130:function(t,e,r){"use strict";r.r(e);var a=r(2),s=r(262),o=r(507);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function i(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=l(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c={name:"saleStatus",data:function(){return{statuses:["Redispatch","Reschedule","Cancelled","Not picking","Busy","Will call back","Not Around","Not financially ready","Dublicate order","Dublicate of already delivered","Wrong order","Office pickup","Not Dispatched"],multiple:!1,multipleStatus:["Redispatch","Reschedule"],pickerOptions:{disabledDate:function(t){return t.getTime()+864e5<Date.now()},shortcuts:[{text:"Today",onClick:function(t){t.$emit("pick",new Date)}},{text:"Tomorrow",onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}}]},dialog:!1,form:{delivery_date:"",status:"",orders:[]},zone_data:{zone_from:null,zone_to:null}}},created:function(){var t=this;eventBus.$on("unDispatchEvent",(function(e){console.log(e),t.form.id=e.id,t.form.orders=e.data,t.multiple=e.multiple,t.dialog=!0}))},methods:{getStatus:function(){this.$store.dispatch("getItems",{model:"statuses",update:"updateStatusList"})},updateStatus:function(){var t=this;if(this.multiple){var e={model:"undispatch_multiple_status",data:this.form};this.$store.dispatch("postItems",e).then((function(e){t.close()}))}else{e={model:"undispatch_status",id:this.form.id,data:this.form};this.$store.dispatch("patchItems",e).then((function(e){t.close()}))}},close:function(){this.dialog=!1},getRiders:function(){this.$store.dispatch("getItems",{model:"rider/riders",update:"updateRidersList"})},getZones:function(){this.$store.dispatch("getItems",{model:"zones",update:"updateZone"})}},mounted:function(){this.getRiders(),this.getZones()},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(a.b)(["riders","errors","loading","zones"]))},d=r(0),u=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"headline",staticStyle:{margin:"auto"}},[t._v("Order Update")])]),t._v(" "),e("VDivider"),t._v(" "),e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{sm12:""}},[e("label",{staticClass:"col-md-5 col-lg-5"},[t._v("Status")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.multiple?t.multipleStatus:t.statuses,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1),t._v(" "),t.errors.status?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.status[0]))]):t._e()],1),t._v(" "),"Reschedule"==t.form.status?e("v-flex",{attrs:{sm12:""}},[e("div",{staticClass:"block"},[e("span",{staticClass:"demonstration",staticStyle:{float:"left"}},[t._v("Schedule Date")]),t._v(" "),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy/MM/dd","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,type:"date",placeholder:"Pick a day"},model:{value:t.form.delivery_date,callback:function(e){t.$set(t.form,"delivery_date",e)},expression:"form.delivery_date"}})],1),t._v(" "),t.errors.delivery_date?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.delivery_date[0]))]):t._e()]):t._e(),t._v(" "),"Redispatch"==t.form.status?e("v-flex",{attrs:{sm12:""}},[e("label",{attrs:{for:""}},[t._v("Rider")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Select",filterable:"",clearable:""},model:{value:t.form.rider_id,callback:function(e){t.$set(t.form,"rider_id",e)},expression:"form.rider_id"}},t._l(t.riders,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),t._v(" "),"Redispatch"==t.form.status?e("v-flex",{attrs:{sm12:""}},[e("label",{attrs:{for:""}},[t._v("Zone To")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Select",filterable:"",clearable:""},model:{value:t.form.zone_to,callback:function(e){t.$set(t.form,"zone_to",e)},expression:"form.zone_to"}},t._l(t.zones,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):t._e()],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),t._v(" "),e("VSpacer"),t._v(" "),e("v-btn",{attrs:{color:"primary",loading:t.loading,disabled:t.loading},on:{click:t.updateStatus}},[t._v("Update")])],1)],1)],1)],1)}),[],!1,null,null,null).exports;function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=v(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _={props:["user"],components:{myStatus:s.a,myMStatus:o.a,unDispatch:u},data:function(){return{activeTab:"dispatch",notes:["Cancelled","Not picking","Busy","Will call back","Not Around","Not financially ready","Dublicate order","Dublicate of already delivered","Wrong order","Office pickup","Not Dispatched"],search:"",undispatched_search:"",singleSelect:!1,selected:[],undispatch_sales:[],undispatch_sales_select:[],csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),form:{zone_from:null,zone_to:null,rider_id:null,status:null,start_date:null,end_date:null},statuses:[{value:"Dispatched"},{value:"Undispatched"},{value:"In Transit"},{value:"Awaiting Return"},{value:"Awaiting Dispatch"},{value:"Return received"},{value:"Returned"},{value:"Delivered"}],headers:[{text:"Created On",value:"created_at"},{text:"Order no",value:"order_no"},{text:"Client Name",value:"client_name"},{text:"Client Address",value:"client.address"},{text:"Client Phone",value:"client.phone"},{text:"Delivery Status",value:"delivery_status"},{text:"Total",value:"total_price"},{text:"Actions",value:"actions",sortable:!1}],headers2:[{text:"Created On",value:"created_at"},{text:"Order no",value:"order_no"},{text:"Client Name",value:"client_name"},{text:"Client Address",value:"client.address"},{text:"Client Phone",value:"client.phone"},{text:"Delivery Status",value:"delivery_status"},{text:"Notes",value:"customer_notes"},{text:"Actions",value:"actions",sortable:!1}],json_fields:{"Order Number":"order_no","Client Name":"client.name",Vendor:"seller.name","Client Address":"client.address","Client Phone":"client.phone","Delivery status":"delivery_status","Product Name":"product_name","Cod amount":"total_price",Remarks:"customer_notes","Return Notes":"return_notes"}}},methods:{undispatch_order:function(){var t={model:"undispatch",update:"updateSaleList",search:this.form.search};this.$store.dispatch("searchItems",t).then((function(t){var e={data:t.data,id:t.data.id,multiple:!1};eventBus.$emit("unDispatchEvent",e)})).catch((function(t){console.log(t)}))},open_dialog:function(){},cancel:function(){},close:function(){},getRemainingOrders:function(){var t={model:"remaining_orders",update:"updateDispatchList",data:this.form};this.$store.dispatch("filterItems",t)},undispatchOrder:function(){var t=this,e={model:"undispatch",update:"updateSaleList",search:this.undispatched_search};this.$store.dispatch("searchItems",e).then((function(e){console.log(e),t.undispatch_sales.some((function(t){return t.id===e.data.id}))?t.$message({type:"error",message:"Order already scanned"}):(t.undispatch_sales.push(e.data),t.undispatched_search="")})).catch((function(t){console.log(t)}))},dispatchItems:function(t){var e={model:"in_transit",data:{orders:this.dispatch_sales,status:t,zone_from:this.form.zone_from,zone_to:this.form.zone_to,rider_id:this.form.rider_id,courier_id:this.form.courier_id}};this.$store.dispatch("postItems",e).then((function(t){}))},unDispatchItems:function(){var t=this,e={model:"undispatch_sales",data:this.undispatch_sales.map((function(t){return{id:t.id,customer_notes:t.customer_notes}}))};this.$store.dispatch("postItems",e).then((function(e){t.undispatch_sales=[],t.search=""}))},orderStatus:function(){eventBus.$emit("multStatusEvent",this.selected)},updateStatus:function(t){eventBus.$emit("orderStatusEvent",t)},undispatch:function(t){var e={data:t,multiple:!1};eventBus.$emit("unDispatchEvent",e)},re_dispatch:function(){var t={data:this.selected.map((function(t){return t.id})),multiple:!0};eventBus.$emit("unDispatchEvent",t)},dispatch_list:function(){this.$refs.dispatch_list.submit()},dispatchList:function(){this.$refs.dispatchList.submit()},pickingList:function(){this.$refs.pickingList.submit()},getZones:function(){this.$store.dispatch("getItems",{model:"zones",update:"updateZone"})},getRiders:function(){this.$store.dispatch("getItems",{model:"rider/riders",update:"updateRidersList"})},filter:function(){var t={model:"dispatch_filter",update:"updateDispatchList",data:this.form};this.$store.dispatch("filterItems",t)},getCouriers:function(){this.$store.dispatch("getItems",{model:"couriers",update:"updateCouriersList"})},getSellers:function(){this.$store.dispatch("getItems",{model:"/seller/sellers",update:"updateSellerList"})},resetSales:function(){this.$store.dispatch("resetItems",{item:"sales",update:"updateDispatchList"})}},computed:p(p({},Object(a.b)(["zones","loading","riders","dispatch_sales","errors","couriers","sellers"])),{},{serialize_data:function(){return JSON.stringify(this.form)}}),mounted:function(){this.getCouriers(),this.getZones(),this.getRiders(),this.getSellers()},created:function(){var t=this;eventBus.$on("saleEvent",(function(e){t.filter()}))}},y=(r(854),Object(d.a)(_,(function(){var t=this,e=t._self._c;return e("div",[e("v-container",{attrs:{fluid:"","fill-height":""}},[e("v-layout",{attrs:{"justify-center":"","align-center":"",wrap:""}},[e("v-flex",{attrs:{sm12:""}},[e("v-card",{staticStyle:{padding:"20px 0"}},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("Dashboard")]),t._v(" "),e("el-breadcrumb-item",[t._v("Dispatch")])],1)],1)],1),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("v-card",[e("v-tabs",{attrs:{"background-color":"primary",dark:"","slider-color":"yellow"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("v-tab",{key:"dispatch"},[t._v("Dispatch Management")]),t._v(" "),e("v-tab",{key:"undispatch"},[t._v("Undispatch")]),t._v(" "),e("v-tab",{key:"batch"},[t._v("Batch Undispatch")])],1),t._v(" "),e("v-tabs-items",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("v-tab-item",{key:"dispatch"},[e("v-btn",{attrs:{color:"primary"},on:{click:t.getRemainingOrders}},[t._v("\n                Remaining Orders\n              ")]),t._v(" "),e("v-card",{attrs:{flat:""}},[e("v-card-text",[e("v-layout",{staticStyle:{"margin-left":"5px"},attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Zone from")]),t._v(" "),e("el-select",{attrs:{placeholder:"Select",filterable:"",clearable:""},model:{value:t.form.zone_from,callback:function(e){t.$set(t.form,"zone_from",e)},expression:"form.zone_from"}},t._l(t.zones,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.zone_from?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.zone_from[0]))]):t._e()],1),t._v(" "),e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Zone to")]),t._v(" "),e("el-select",{attrs:{placeholder:"Select",filterable:"",clearable:"",multiple:""},model:{value:t.form.zone_to,callback:function(e){t.$set(t.form,"zone_to",e)},expression:"form.zone_to"}},t._l(t.zones,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.zone_to?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.zone_to[0]))]):t._e()],1),t._v(" "),e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Rider")]),t._v(" "),e("el-select",{attrs:{placeholder:"Select",filterable:"",clearable:"",multiple:""},model:{value:t.form.rider_id,callback:function(e){t.$set(t.form,"rider_id",e)},expression:"form.rider_id"}},t._l(t.riders,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.rider_id?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.rider_id[0]))]):t._e()],1),t._v(" "),e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Courier")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Courier",clearable:"",filterable:""},model:{value:t.form.courier_id,callback:function(e){t.$set(t.form,"courier_id",e)},expression:"form.courier_id"}},t._l(t.couriers,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.courier_id?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.courier_id[0]))]):t._e()],1),t._v(" "),e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Vendor")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Vendor",clearable:"",filterable:""},model:{value:t.form.vendor,callback:function(e){t.$set(t.form,"vendor",e)},expression:"form.vendor"}},t._l(t.sellers.data,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.vendor?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.vendor[0]))]):t._e()],1),t._v(" "),e("v-flex",{attrs:{sm2:""}},[e("label",[t._v("Status")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select",multiple:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statuses,(function(t,r){return e("el-option",{key:r,attrs:{label:t.value,value:t.value}})})),1),t._v(" "),t.errors.status?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.status[0]))]):t._e()],1),t._v(" "),e("v-flex",{attrs:{sm3:""}},[e("label",{staticStyle:{float:"left",width:"100%"}},[t._v("Dispatched on")]),t._v(" "),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",align:"right","start-placeholder":"Start Date","end-placeholder":"End Date",format:"yyyy/MM/dd","value-format":"yyyy-MM-dd"},model:{value:t.form.dispatched_on,callback:function(e){t.$set(t.form,"dispatched_on",e)},expression:"form.dispatched_on"}}),t._v(" "),t.errors.dispatched_on?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.dispatched_on[0]))]):t._e()],1),t._v(" "),e("v-flex",{staticStyle:{"margin-left":"5px"},attrs:{sm2:""}},[e("v-btn-toggle",{staticStyle:{"margin-top":"20px"},attrs:{mandatory:""}},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,s=r.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:t.filter}},"v-btn",s,!1),a),[e("v-icon",{attrs:{small:"",color:"grey"}},[t._v("mdi-magnify")])],1)]}}])},[t._v(" "),e("span",[t._v("Filter")])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,s=r.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:t.dispatch_list}},"v-btn",s,!1),a),[e("v-icon",{attrs:{small:"",color:"grey"}},[t._v("mdi-download")])],1)]}}])},[t._v(" "),e("span",[t._v("Download Dispatch list")])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,s=r.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:t.dispatchList}},"v-btn",s,!1),a),[e("v-icon",{attrs:{small:"",color:"grey"}},[t._v("mdi-file-pdf-box")])],1)]}}])},[t._v(" "),e("span",[t._v("Download dispatch list")])]),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,s=r.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:t.pickingList}},"v-btn",s,!1),a),[e("v-icon",{attrs:{small:"",color:"grey"}},[t._v("mdi-printer")])],1)]}}])},[t._v(" "),e("span",[t._v("Download Picking list")])]),t._v(" "),t.dispatch_sales.length>0&&t.user.can["Order dispatch"]?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,s=r.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:function(e){return t.dispatchItems("Dispatched")}}},"v-btn",s,!1),a),[e("v-icon",{attrs:{small:"",color:"grey"}},[t._v("mdi-send")])],1)]}}],null,!1,1946317099)},[t._v(" "),e("span",[t._v("Dispatch Orders")])]):t._e(),t._v(" "),e("v-btn",[e("download-excel",{attrs:{data:t.dispatch_sales,fields:t.json_fields,name:"dispatch.xls"}},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on;return[e("v-btn",t._g({staticClass:"mx-0",attrs:{slot:"activator",icon:""},slot:"activator"},a),[e("v-icon",[t._v("mdi-file-excel")])],1)]}}])},[t._v(" "),e("span",[t._v("Download report")])])],1)],1),t._v(" "),t.dispatch_sales.length>0&&t.user.can["Order dispatch"]?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,s=r.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:function(e){return t.dispatchItems("In Transit")}}},"v-btn",s,!1),a),[e("v-icon",{attrs:{small:"",color:"success"}},[t._v("mdi-checkbox-marked")])],1)]}}],null,!1,1393004454)},[t._v(" "),e("span",[t._v("Send to Intransit")])]):t._e()],1)],1)],1),t._v(" "),e("v-divider",{staticClass:"my-3"}),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("v-text-field",{staticClass:"mb-4",attrs:{"append-icon":"mdi-magnify",label:"Quick Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.dispatch_sales,search:t.search,loading:t.loading,"single-select":t.singleSelect,"item-key":"id","show-select":""},scopedSlots:t._u([{key:"top",fn:function(){return[t.selected.length>0?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on;return[e("v-btn",t._g({staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.re_dispatch()}},slot:"activator"},a),[e("v-icon",{attrs:{small:"",color:"blue darken-2"}},[t._v("mdi-clipboard-text")])],1)]}}],null,!1,1795956422)},[t._v(" "),e("span",[t._v("Re-dispatch orders")])]):t._e()]},proxy:!0},t.user.can["Order view"]?{key:"item.actions",fn:function(r){var a=r.item;return[t.user.can["Order update status"]?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var s=r.on;return[e("v-btn",t._g({staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.undispatch(a)}},slot:"activator"},s),[e("v-icon",{attrs:{small:"",color:"blue darken-2"}},[t._v("mdi-clipboard-text")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("Undispatch Orders")])]):t._e()]}}:null],null,!0),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1)],1)],1),t._v(" "),e("v-tab-item",{key:"undispatch"},[e("v-card",{attrs:{flat:"",loading:t.loading}},[e("v-card-text",[e("v-layout",{attrs:{row:""}},[e("v-flex",{attrs:{sm12:""}},[e("v-card-title",[t._v("Undispatch Individual Orders")]),t._v(" "),e("v-text-field",{ref:"focusMe",attrs:{"append-icon":"mdi-magnify",label:"Scan"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.undispatch_order()}},model:{value:t.form.search,callback:function(e){t.$set(t.form,"search",e)},expression:"form.search"}})],1)],1)],1)],1)],1),t._v(" "),e("v-tab-item",{key:"batch"},[e("v-card",{attrs:{flat:""}},[e("v-card-text",[e("v-card-title",[t._v("Undispatch Multiple Orders")]),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("v-text-field",{ref:"focusMe",attrs:{"append-icon":"mdi-magnify",label:"Scan"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.undispatchOrder()}},model:{value:t.undispatched_search,callback:function(e){t.undispatched_search=e},expression:"undispatched_search"}}),t._v(" "),e("v-btn",{staticClass:"mb-4",attrs:{color:"info",disabled:0===t.undispatch_sales.length},on:{click:t.unDispatchItems}},[t._v("\n                      Undispatch Selected Orders\n                    ")]),t._v(" "),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers2,items:t.undispatch_sales,loading:t.loading,"item-key":"id"},scopedSlots:t._u([{key:"item.customer_notes",fn:function(r){return[e("v-edit-dialog",{attrs:{"return-value":r.item.customer_notes,large:"",persistent:""},on:{"update:returnValue":function(e){return t.$set(r.item,"customer_notes",e)},"update:return-value":function(e){return t.$set(r.item,"customer_notes",e)},cancel:t.cancel,open:t.open_dialog,close:t.close,save:function(e){return t.update_data(r.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[e("div",{staticClass:"mt-4 title",staticStyle:{color:"#333"}},[t._v("\n                              Notes\n                            ")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",filterable:"",clearable:"",placeholder:"Select"},model:{value:r.item.customer_notes,callback:function(e){t.$set(r.item,"customer_notes",e)},expression:"props.item.customer_notes"}},t._l(t.notes,(function(t,r){return e("el-option",{key:r,attrs:{label:t,value:t}})})),1)]},proxy:!0}],null,!0)},[t._v("\n                          "+t._s(r.item.customer_notes)+"\n                          ")])]}}])})],1)],1)],1)],1)],1)],1)],1)],1),t._v(" "),e("form",{ref:"dispatch_list",attrs:{action:"/dispatch_list",method:"post",target:"_blank"}},[e("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"packages"},domProps:{value:t.serialize_data}})]),t._v(" "),e("form",{ref:"dispatchList",attrs:{action:"/dispatchList",method:"post",target:"_blank"}},[e("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"packages"},domProps:{value:t.serialize_data}})]),t._v(" "),e("form",{ref:"pickingList",attrs:{action:"/pickingList",method:"post",target:"_blank"}},[e("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"packages"},domProps:{value:t.serialize_data}})])],1),t._v(" "),e("myStatus"),t._v(" "),e("myMStatus"),t._v(" "),e("unDispatch")],1)}),[],!1,null,"1d4f3e3c",null));e.default=y.exports},1153:function(t,e,r){"use strict";r.r(e);var a=r(2);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var n={props:["user"],data:function(){return{indexUpdate:null,radio:"1",data:"",search:"",form:{search:"",zone_from:null,zone_to:null,rider_id:null},orders:[],headers:[{text:"Created On",value:"created_at"},{text:"Order No",value:"order_no"},{text:"Client Name",value:"client_name"},{text:"Client Address",value:"client_address"},{text:"Client Phone",value:"client_phone"},{text:"Delivery Status",value:"delivery_status"},{text:"Reason",value:"return_notes"},{text:"Total",value:"total_price"},{text:"Actions",value:"actions",sortable:!1}],statuses:[{status:"Delivered"},{status:"Returned"},{status:"Received"},{status:"Pending"},{status:"Cancelled"}],admin_statuses:[{status:"Delivered"},{status:"Returned"},{status:"Received"},{status:"Cancelled"},{status:"Pending"},{status:"In Transit"},{status:"Scheduled"}],call_statuses:[{status:"Cancelled"}],agentStatuses:[{status:"Awaiting Return"}],reasons:["Not picking calls","Not Financially Ready","Assign another rider","Office pickup","Offline","Schedule another day","Outbound order","Cancelled","User Busy","Unresponsive","Dublicate order"," Dublicate of already delivered","Not interested","Wrong order","Will call later","Client not around","Custom"]}},methods:{close:function(){},cancel:function(){},open_dialog:function(){},update_data:function(t){console.log("🚀 ~ file: status_update.vue:176 ~ update_data ~ data:",t)},reset:function(){this.orders=[]},dispatch:function(){var t=this,e={model:"update_order_status",data:{orders:this.orders,status:this.form.delivery_status,update_date:this.form.update_date}};this.$store.dispatch("postItems",e).then((function(e){t.reset()})).catch((function(t){console.log(t)}))},get_waybills:function(){var t=this,e={model:"get_dispatch?bulkupdate=true",update:"UpdateEmpty",data:{data:this.data}};this.$store.dispatch("filterItems",e).then((function(e){e.data.forEach((function(e){t.orders.push(e)}))})).catch((function(t){console.log(t)}))},getStatus:function(){this.$store.dispatch("getItems",{model:"statuses",update:"updateStatusList"})},add_order:function(){var t=this,e=!1;if(this.orders.forEach((function(r){r.order_no==t.form.search&&(e=!0,t.$message({type:"error",message:"Order already scanned"}))})),!e){var r={model:"scan_status",update:"updateSaleList",search:this.form.search};this.$store.dispatch("searchItems",r).then((function(e){t.form.search="",t.orders.push(e.data)})).catch((function(t){console.log(t)}))}},remove:function(t){this.orders.splice(t,1)},getZones:function(){this.$store.dispatch("getItems",{model:"zones",update:"updateZone"})},getRiders:function(){this.$store.dispatch("getItems",{model:"rider/riders",update:"updateRidersList"})}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(a.b)(["loading"])),mounted:function(){}},i=r(0),c=Object(i.a)(n,(function(){var t=this,e=t._self._c;return e("div",[e("v-container",{attrs:{fluid:"","fill-height":""}},[e("v-layout",{attrs:{"justify-center":"","align-center":"",wrap:""}},[e("v-flex",{attrs:{sm12:""}},[e("v-card",{staticStyle:{padding:"20px 0"}},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("Dashboard")]),t._v(" "),e("el-breadcrumb-item",[t._v("Status Update")])],1)],1)],1),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("v-card",{staticStyle:{padding:"10px 10px"}},[e("v-layout",{staticStyle:{"margin-left":"5px"},attrs:{row:"",wrap:""}},["Super admin"==t.user.roles[0].name?e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Order status")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.delivery_status,callback:function(e){t.$set(t.form,"delivery_status",e)},expression:"form.delivery_status"}},t._l(t.admin_statuses,(function(t,r){return e("el-option",{key:r,attrs:{label:t.status,value:t.status}})})),1)],1):"Call center"==t.user.roles[0].name?e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Order status")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.delivery_status,callback:function(e){t.$set(t.form,"delivery_status",e)},expression:"form.delivery_status"}},t._l(t.call_statuses,(function(t,r){return e("el-option",{key:r,attrs:{label:t.status,value:t.status}})})),1)],1):"Agent"==t.user.roles[0].name||t.user.can["Update Awaiting Return"]?e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Order status")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.delivery_status,callback:function(e){t.$set(t.form,"delivery_status",e)},expression:"form.delivery_status"}},t._l(t.agentStatuses,(function(t,r){return e("el-option",{key:r,attrs:{label:t.status,value:t.status}})})),1)],1):t.user.can["Order update delivered or returned"]?e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Order status")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.delivery_status,callback:function(e){t.$set(t.form,"delivery_status",e)},expression:"form.delivery_status"}},t._l(t.statuses,(function(t,r){return e("el-option",{key:r,attrs:{label:t.status,value:t.status}})})),1)],1):t._e(),t._v(" "),t.user.can["Order update delivered or returned"]?e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Update Date")]),t._v(" "),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Date",format:"yyyy/MM/dd","value-format":"yyyy-MM-dd"},model:{value:t.form.update_date,callback:function(e){t.$set(t.form,"update_date",e)},expression:"form.update_date"}})],1):t._e(),t._v(" "),t.user.can["Order update delivered or returned"]||"Agent"==t.user.roles[0].name||t.user.can["Update Awaiting Return"]?e("v-flex",{staticStyle:{"margin-left":"5px","margin-top":"30px"},attrs:{sm1:""}},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,s=r.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:t.dispatch}},"v-btn",s,!1),a),[e("v-icon",[t._v("mdi-update")])],1)]}}],null,!1,2567917798)},[t._v(" "),e("span",[t._v("Update")])])],1):t._e(),t._v(" "),e("v-spacer")],1),t._v(" "),e("v-divider"),t._v(" "),e("v-flex",{staticStyle:{"margin-right":"20px","margin-top":"30px"},attrs:{sm6:""}},[e("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("Scan one by one")]),t._v(" "),e("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("Input waybills")]),t._v(" "),1==t.radio?e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Scan"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add_order.apply(null,arguments)}},model:{value:t.form.search,callback:function(e){t.$set(t.form,"search",e)},expression:"form.search"}}):e("div",[e("label",{attrs:{for:""}},[t._v("Input waybills separated by commas or a new line")]),t._v(" "),e("el-input",{attrs:{type:"textarea",rows:3,placeholder:"Please input"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{small:"",elevation:"3",color:"primary",text:""},on:{click:t.get_waybills}},[t._v("Search")])],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-layout",{attrs:{row:""}},[e("v-flex",{staticStyle:{"margin-left":"10px"},attrs:{sm1:""}},[e("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on;return[e("v-btn",t._g({staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:t.reset},slot:"activator"},a),[e("v-icon",{attrs:{color:"blue darken-2",small:""}},[t._v("mdi-refresh")])],1)]}}])},[t._v(" "),e("span",[t._v("Reset")])])],1),t._v(" "),e("v-flex",{attrs:{sm2:""}},[e("h3",{staticStyle:{"margin-left":"30px !important","margin-top":"10px"}},[t._v("Status")])])],1),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("v-data-table",{attrs:{headers:t.headers,items:t.orders,search:t.search,loading:t.loading},scopedSlots:t._u([{key:"item.actions",fn:function(r){r.item;var a=r.index;return[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var s=r.on;return[e("v-btn",t._g({staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.remove(a)}},slot:"activator"},s),[e("v-icon",{attrs:{small:"",color:"pink darken-2"}},[t._v("mdi-delete")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("Remove")])])]}},{key:"item.return_notes",fn:function(r){return[e("v-edit-dialog",{attrs:{"return-value":r.item.return_notes,large:"",persistent:""},on:{"update:returnValue":function(e){return t.$set(r.item,"return_notes",e)},"update:return-value":function(e){return t.$set(r.item,"return_notes",e)},cancel:t.cancel,open:t.open_dialog,close:t.close,save:function(e){return t.update_data(r.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[e("div",{staticClass:"mt-4 title",staticStyle:{color:"#333"}},[t._v("\n                                            Update Reason\n                                        ")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",filterable:"",clearable:"",placeholder:"Select"},model:{value:r.item.return_notes,callback:function(e){t.$set(r.item,"return_notes",e)},expression:"props.item.return_notes"}},t._l(t.reasons,(function(t,r){return e("el-option",{key:r,attrs:{label:t,value:t}})})),1)]},proxy:!0}],null,!0)},[t._v("\n                                    "+t._s(r.item.return_notes)+"\n                                    ")])]}}])})],1)],1)],1)],1)],1)],1)}),[],!1,null,"c55b84c4",null);e.default=c.exports},1156:function(t,e,r){"use strict";r.r(e);var a=r(2);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i={props:["user"],components:{myPod:r(506).a},data:function(){return{search:"",csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),form:{zone_from:null,zone_to:null,rider_id:null,status:null,start_date:null,end_date:null},statuses:[{value:"Dispatched"}],headers:[{text:"Created On",value:"created_at"},{text:"Order no",value:"order_no"},{text:"Client Name",value:"client.name"},{text:"Client Address",value:"client.address"},{text:"Client Phone",value:"client.phone"},{text:"Delivery Status",value:"delivery_status"},{text:"Total",value:"total_price"},{text:"Pod",value:"pod"},{text:"Actions",value:"actions",sortable:!1}],json_fields:{"Order Number":"order_no","Client Name":"client.name","Product Name":"product_name","Cod amount":"total_price",Quantity:"qty",Remarks:"notes"},speedaf_fields:{"S.O.":"order_no","Goods type":"","Goods name":"product_name","Quantity of Item":"quantity",Weight:.5,COD:"total_price","Insure price":"",Remark:"notes","C Name":"company_name","C Telephone":"company_phone","C Country":"Kenyan","C Region":"company_city","C City":"company_city","C Area":"company_city","Senders address":"company_address",Name:"client.name",Telephone:"client.phone",Country:"Kenya",Region:"client.city",City:"client.city",Area:"client.city","Receivers address":"client.address"}}},methods:{dispatch_list:function(){this.$refs.dispatch_list.submit()},getZones:function(){this.$store.dispatch("getItems",{model:"zones",update:"updateZone"})},getRiders:function(){this.$store.dispatch("getItems",{model:"rider/riders",update:"updateRidersList"})},filter:function(){this.form.paginate=!0;var t={model:"mobile_filter",update:"updateDispatchList",data:this.form};this.$store.dispatch("filterItems",t)},open_pod:function(t){eventBus.$emit("openPod",t)},resetSales:function(){this.$store.dispatch("resetItems",{item:"sales",update:"updateDispatchList"})},updateStatus:function(t,e){var r=this,a={model:"approve_delivery/"+t.id,data:t};this.$store.dispatch("postItems",a).then((function(){r.filter()}))}},computed:l(l({},Object(a.b)(["zones","loading","riders","dispatch_sales","errors"])),{},{serialize_data:function(){return JSON.stringify(this.form)}}),mounted:function(){this.getZones(),this.getRiders()}},c=(r(860),r(0)),d=Object(c.a)(i,(function(){var t=this,e=t._self._c;return e("div",[e("v-container",{attrs:{fluid:"","fill-height":""}},[e("v-layout",{attrs:{"justify-center":"","align-center":"",wrap:""}},[e("v-flex",{attrs:{sm12:""}},[e("v-card",{staticStyle:{padding:"20px 0"}},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("Dashboard")]),t._v(" "),e("el-breadcrumb-item",[t._v("Dispatch")])],1)],1)],1),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("v-card",{staticStyle:{padding:"10px 0"}},[e("v-layout",{staticStyle:{"margin-left":"5px"},attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Zone from")]),t._v(" "),e("el-select",{attrs:{placeholder:"Select",filterable:"",clearable:""},model:{value:t.form.zone_from,callback:function(e){t.$set(t.form,"zone_from",e)},expression:"form.zone_from"}},t._l(t.zones,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.zone_from?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.zone_from[0]))]):t._e()],1),t._v(" "),e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Zone to")]),t._v(" "),e("el-select",{attrs:{placeholder:"Select",filterable:"",clearable:""},model:{value:t.form.zone_to,callback:function(e){t.$set(t.form,"zone_to",e)},expression:"form.zone_to"}},t._l(t.zones,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.zone_to?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.zone_to[0]))]):t._e()],1),t._v(" "),e("v-flex",{attrs:{sm2:""}},[e("label",{attrs:{for:""}},[t._v("Rider/Agent")]),t._v(" "),e("el-select",{attrs:{placeholder:"Select",filterable:"",clearable:""},model:{value:t.form.rider_id,callback:function(e){t.$set(t.form,"rider_id",e)},expression:"form.rider_id"}},t._l(t.riders,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.rider_id?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.rider_id[0]))]):t._e()],1),t._v(" "),e("v-flex",{attrs:{sm2:""}},[e("label",[t._v("Status")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statuses,(function(t,r){return e("el-option",{key:r,attrs:{label:t.value,value:t.value}})})),1),t._v(" "),t.errors.status?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.status[0]))]):t._e()],1),t._v(" "),e("v-flex",{attrs:{sm3:""}},[e("div",{staticClass:"block"},[e("label",{staticStyle:{float:"left"}},[t._v("Dispatch Start date")]),t._v(" "),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy/MM/dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"Pick a day"},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1),t._v(" "),t.errors.start_date?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.start_date[0]))]):t._e()]),t._v(" "),e("v-flex",{attrs:{sm3:""}},[e("div",{staticClass:"block"},[e("label",{staticStyle:{float:"left"}},[t._v("Dispatch End date")]),t._v(" "),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy/MM/dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"Pick a day"},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}})],1),t._v(" "),t.errors.end_date?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.end_date[0]))]):t._e()]),t._v(" "),e("v-flex",{staticStyle:{"margin-left":"5px"},attrs:{sm2:""}},[e("v-btn-toggle",{staticStyle:{"margin-top":"20px"},attrs:{mandatory:""}},[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,s=r.attrs;return[e("v-btn",t._g(t._b({attrs:{icon:"",color:"primary"},on:{click:t.filter}},"v-btn",s,!1),a),[e("v-icon",{attrs:{small:"",color:"grey"}},[t._v("mdi-magnify")])],1)]}}])},[t._v(" "),e("span",[t._v("Filter")])])],1)],1)],1),t._v(" "),e("v-divider"),t._v(" "),e("v-layout",{attrs:{row:""}},[e("v-flex",{attrs:{sm12:""}},[e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Quick Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),e("v-data-table",{attrs:{headers:t.headers,items:t.dispatch_sales.sales,search:t.search,loading:t.loading},scopedSlots:t._u([{key:"item.pod",fn:function(r){var a=r.item;return[a.pod?e("img",{staticStyle:{width:"35px"},attrs:{src:a.pod.signature,alt:""},on:{click:function(e){return t.open_pod(a)}}}):e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var s=r.on;return[e("v-btn",t._g({staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.open_pod(a)}},slot:"activator"},s),[e("v-icon",{attrs:{small:"",color:"red"}},[t._v("mdi-eye")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("More details")])])]}},{key:"item.delivery_status",fn:function(r){var a=r.item;return[e("div",["Delivered"==a.delivery_status?e("el-tag",{attrs:{type:"success"}},[t._v(t._s(a.delivery_status))]):"Dispatched"==a.delivery_status?e("el-tag",{attrs:{type:"info"}},[t._v(t._s(a.delivery_status))]):"Returned"==a.delivery_status||"Cancelled"==a.delivery_status?e("el-tag",{attrs:{type:"danger"}},[t._v(t._s(a.delivery_status))]):"pending approval"==a.delivery_status?e("el-tag",[t._v("Delivered "+t._s(a.delivery_status))]):e("el-tag",{attrs:{type:"warning"}},[t._v(t._s(a.delivery_status))])],1)]}},"Super admin"==t.user.roles[0].name||"Finance"==t.user.roles[0].name?{key:"item.actions",fn:function(r){var a=r.item;return["pending approval"==a.delivery_status?e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var s=r.on;return[e("v-btn",t._g({staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:function(e){return t.updateStatus(a)}},slot:"activator"},s),[e("v-icon",{attrs:{small:"",color:"success"}},[t._v("mdi-check-circle")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("Approve")])]):t._e()]}}:null],null,!0)})],1)],1)],1)],1)],1),t._v(" "),e("form",{ref:"dispatch_list",attrs:{action:"/dispatch_list",method:"post",target:"_blank"}},[e("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"packages"},domProps:{value:t.serialize_data}})])],1),t._v(" "),e("myPod")],1)}),[],!1,null,"76ed8826",null);e.default=d.exports},262:function(t,e,r){"use strict";var a=r(2);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i={name:"saleStatus",data:function(){return{pendingReason:["UNRESPONSIVE","UNREACHABLE","LINE BUSY","CLIENT IS IN A MEETING, WILL CALL US BACK LATER","CLIENT IS IN A MEETING, WANTS TO BE CALLED LATER","HANGED UP ON CALLS","CLIENT IS IN A NOISY PLACE","CLIENT IS SILENT ON CALLS","TO BE CALLED TOMORROW","TO BE CALLED NEXT WEEK (dates to be indicated)","WHATSAPP PHOTO SENT, AWAITING RESPONSE","MERCHANT INFORMED, AWAITING RESPONSE","OWNER OF THE PHONE IS NOT AROUND, WILL CALL US BACK"],cancelReason:["CLIENT CHANGED THEIR MIND","PRODUCT IS TOO EXPENSIVE","DID NOT PLACE THE ORDER","THE ORDER TOOK LONG","WILL CALL AND REORDER WHEN READY FINANCIALLY","WILL CALL AND REORDER WHEN BACK IN TOWN","GOT A CHEAPER ALTERNATIVE","WRONG NUMBER","INCOMPLETE NUMBER","NOT A KENYAN ORDER","WILL CALL AND REORDER WHEN READY TO PICK THE PARCEL","DOES NOT MEET THEIR EXPECTATIONS","WAS ONLY INQUIRING","WANTED A FURTHER DISCOUT","NEVER PICKS PARCELS"],pickerOptions:{disabledDate:function(t){return t.getTime()+864e5<Date.now()},shortcuts:[{text:"Today",onClick:function(t){t.$emit("pick",new Date)}},{text:"Tomorrow",onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}}]},dialog:!1,form:{partial_delivery:"delivered",zone_from:null,zone_to:null},selectedZone:null,zone_data:{zone_from:null,zone_to:null},zoneSelectKey:0}},created:function(){var t=this;eventBus.$on("orderStatusEvent",(function(e){console.log("data"),console.log(e),console.log("data"),t.dialog=!0,e.payment_method=null==e.payment_method?"Cash":e.payment_method,t.form=e,t.selectedZone=t.form.zone_to,t.zones.length<1&&t.getZones(),t.statuses.length<1&&t.getStatus(),t.api_connect.length<1&&t.getApi()}))},watch:{"form.delivery_status":function(t,e){this.selectedZone=this.form.zone_to},"form.zone_to":function(t){this.selectedZone=t}},methods:{zoneToChanged:function(t){this.form.zone_to=t,console.log("Zone To Changed:",t),console.log("Form Zone To:",this.form.zone_to)},getStatus:function(){this.$store.dispatch("getItems",{model:"statuses",update:"updateStatusList"})},getZones:function(){this.$store.dispatch("getItems",{model:"zones",update:"updateZone"})},getOrderZones:function(t){var e=this,r={model:"sale_zones/"+t,update:"UpdateEmpty"};this.$store.dispatch("getItems",r).then((function(t){console.log(t.data.zone_id),e.form.zone_to=t.data.zone_to,e.form.zone_from=t.data.zone_id,console.log("this"),console.log(e.form)}))},updateStatus:function(){var t=this;!this.selectedZone||"Scheduled"!==this.form.delivery_status&&"Dispatched"!==this.form.delivery_status||(this.form.zone_to=this.selectedZone),console.log("Submitting form with zone_to:",this.form.zone_to);var e={model:"status_update",id:this.form.id,data:this.form};this.$store.dispatch("patchItems",e).then((function(e){t.close()}))},getApi:function(){this.$store.dispatch("getItems",{model:"api_check",update:"updatApiConnection"}).then((function(t){}))},close:function(){this.dialog=!1}},mounted:function(){},computed:l(l({},Object(a.b)(["statuses","zones","errors","loading","api_connect"])),{},{showZoneTo:function(){return"Dispatched"===this.form.delivery_status||"Scheduled"===this.form.delivery_status}})},c=r(0),d=Object(c.a)(i,(function(){var t=this,e=t._self._c;return e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"headline",staticStyle:{margin:"auto"}},[t._v("Order Details")])]),t._v(" "),e("VDivider"),t._v(" "),e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{sm12:""}},[e("label",{staticClass:"col-md-5 col-lg-5"},[t._v("Status")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.delivery_status,callback:function(e){t.$set(t.form,"delivery_status",e)},expression:"form.delivery_status"}},t._l(t.statuses,(function(t){return e("el-option",{key:t.id,attrs:{label:t.status,value:t.status}})})),1),t._v(" "),t.errors.delivery_status?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.delivery_status[0]))]):t._e()],1),t._v(" "),"Scheduled"==t.form.delivery_status?e("v-flex",{attrs:{sm12:""}},[e("div",{staticClass:"block"},[e("span",{staticClass:"demonstration",staticStyle:{float:"left"}},[t._v("Schedule Date")]),t._v(" "),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy/MM/dd","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,type:"date",placeholder:"Pick a day"},model:{value:t.form.delivery_date,callback:function(e){t.$set(t.form,"delivery_date",e)},expression:"form.delivery_date"}})],1),t._v(" "),t.errors.delivery_date?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.delivery_date[0]))]):t._e()]):t._e(),t._v(" "),"Scheduled"!=t.form.delivery_status?e("v-flex",{attrs:{sm12:""}},[e("div",{staticClass:"block"},[e("span",{staticClass:"demonstration",staticStyle:{float:"left"}},[t._v("Recall Date")]),t._v(" "),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy/MM/dd","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,type:"date",placeholder:"Pick a day"},model:{value:t.form.recall_date,callback:function(e){t.$set(t.form,"recall_date",e)},expression:"form.recall_date"}})],1),t._v(" "),t.errors.delivery_date?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.delivery_date[0]))]):t._e()]):t._e(),t._v(" "),"Dispatched"==t.form.delivery_status?e("v-flex",{attrs:{sm12:""}},[e("label",{staticClass:"col-md-5 col-lg-5"},[t._v("Zone from")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.zone_from,callback:function(e){t.$set(t.form,"zone_from",e)},expression:"form.zone_from"}},t._l(t.zones,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.zone_id?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.zone_id[0]))]):t._e()],1):t._e(),t._v(" "),t.showZoneTo?e("v-flex",{attrs:{sm12:""}},[e("label",{staticClass:"col-md-5 col-lg-5"},[t._v("Zone to")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},on:{change:t.zoneToChanged},model:{value:t.selectedZone,callback:function(e){t.selectedZone=e},expression:"selectedZone"}},t._l(t.zones,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.zone_id?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.zone_id[0]))]):t._e()],1):t._e(),t._v(" "),t.api_connect.mpesa&&"Delivered"==t.form.delivery_status?e("v-flex",{attrs:{sm6:""}},[e("el-radio",{attrs:{border:"",label:"Cash"},model:{value:t.form.payment_method,callback:function(e){t.$set(t.form,"payment_method",e)},expression:"form.payment_method"}},[t._v("Cash")]),t._v(" "),e("el-radio",{attrs:{border:"",label:"Mpesa"},model:{value:t.form.payment_method,callback:function(e){t.$set(t.form,"payment_method",e)},expression:"form.payment_method"}},[t._v("M-pesa")])],1):t._e(),t._v(" "),"Delivered"==t.form.delivery_status?e("v-flex",{attrs:{sm6:""}},[e("el-radio",{attrs:{label:"delivered"},model:{value:t.form.partial_delivery,callback:function(e){t.$set(t.form,"partial_delivery",e)},expression:"form.partial_delivery"}},[t._v("Delivered")]),t._v(" "),e("el-radio",{attrs:{label:"partial_delivery"},model:{value:t.form.partial_delivery,callback:function(e){t.$set(t.form,"partial_delivery",e)},expression:"form.partial_delivery"}},[t._v("Partial\n                                delivery")])],1):t._e(),t._v(" "),"Delivered"==t.form.delivery_status&&"partial_delivery"==t.form.partial_delivery?e("v-flex",{attrs:{sm12:""}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.form.products}},[e("el-table-column",{attrs:{prop:"product_name",label:"Date",width:"180"}}),t._v(" "),e("el-table-column",{attrs:{prop:"pivot.quantity_tobe_delivered",label:"Expected items",width:"180"}}),t._v(" "),e("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-input",{attrs:{placeholder:"Please input"},model:{value:r.row.pivot.quantity_delivered,callback:function(e){t.$set(r.row.pivot,"quantity_delivered",e)},expression:"scope.row.pivot.quantity_delivered"}})]}}],null,!1,3133951746)})],1)],1):t._e(),t._v(" "),"Delivered"==t.form.delivery_status&&"partial_delivery"==t.form.partial_delivery?e("v-flex",{attrs:{sm12:""}},[e("label",{staticClass:"col-md-5 col-lg-5"},[t._v("New Cod")]),t._v(" "),e("el-input",{attrs:{placeholder:"Please input"},model:{value:t.form.amount_paid,callback:function(e){t.$set(t.form,"amount_paid",e)},expression:"form.amount_paid"}})],1):t._e(),t._v(" "),t.api_connect.mpesa&&"Delivered"==t.form.delivery_status&&"Mpesa"==t.form.payment_method?e("v-flex",{attrs:{sm12:""}},[e("label",{staticClass:"col-md-5 col-lg-5"},[t._v("Mpesa Code")]),t._v(" "),e("el-input",{attrs:{placeholder:"PH9..."},model:{value:t.form.mpesa_code,callback:function(e){t.$set(t.form,"mpesa_code",e)},expression:"form.mpesa_code"}}),t._v(" "),t.errors.mpesa_code?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.mpesa_code[0]))]):t._e()],1):t._e(),t._v(" "),"Pending"==t.form.delivery_status||"Cancelled"==t.form.delivery_status?e("v-flex",{attrs:{sm12:""}},[e("label",{staticStyle:{color:"#52627d"},attrs:{for:""}},[t._v("Comments")]),t._v(" "),"Pending"==t.form.delivery_status?e("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.customer_notes,callback:function(e){t.$set(t.form,"customer_notes",e)},expression:"form.customer_notes"}},t._l(t.pendingReason,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1):"Cancelled"==t.form.delivery_status?e("el-select",{staticStyle:{width:"100%"},attrs:{"allow-create":"",filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.customer_notes,callback:function(e){t.$set(t.form,"customer_notes",e)},expression:"form.customer_notes"}},t._l(t.cancelReason,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1):t._e(),t._v(" "),e("br")],1):t._e(),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("label",{staticStyle:{color:"#52627d"},attrs:{for:""}},[t._v("Comments")]),t._v(" "),e("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"comments",maxlength:"500","show-word-limit":""},model:{value:t.form.customer_notes,callback:function(e){t.$set(t.form,"customer_notes",e)},expression:"form.customer_notes"}}),t._v(" "),t.errors.customer_notes?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.customer_notes[0]))]):t._e()],1)],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),t._v(" "),e("VSpacer"),t._v(" "),e("v-btn",{attrs:{color:"primary",loading:t.loading,disabled:t.loading},on:{click:t.updateStatus}},[t._v("Update")])],1)],1)],1)],1)}),[],!1,null,null,null);e.a=d.exports},506:function(t,e,r){"use strict";var a=r(2);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var n={data:function(){return{dialog:!1,loading:!1,form:{},comments:[],selectedItem:0,payload:{model:"leaves"},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),accept:"application/json"},fileList:[]}},created:function(){var t=this;eventBus.$on("openPod",(function(e){console.log(e),t.dialog=!0,t.form=e,t.getPod()}))},methods:{close:function(){this.dialog=!1},getPod:function(){var t={model:"pods/".concat(this.form.id),update:"updatePod"};this.$store.dispatch("getItems",t)},handlePreview:function(){},handleRemove:function(){},handleError:function(t,e){this.$store.dispatch("page_loader",!1),this.$message.error("Something went wrong. Please check your file!")},handleSuccess:function(t,e){},beforeUpload:function(t){},handleFileUpload:function(){this.$refs.upload.submit()}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(a.b)(["pods"]))},i=r(0),c=Object(i.a)(n,(function(){var t=this,e=t._self._c;return e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.dialog?e("v-card",[e("v-card-title",[e("span",{staticClass:"headline text-center",staticStyle:{margin:"auto"}},[t._v("Proof Of delivery")]),t._v(" "),e("VSpacer"),t._v(" "),e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on;return[e("v-btn",t._g({staticClass:"mx-0",attrs:{slot:"activator",icon:""},on:{click:t.close},slot:"activator"},a),[e("v-icon",{attrs:{small:"",color:"blue darken-2"}},[t._v("close")])],1)]}}],null,!1,1092174889)},[t._v(" "),e("span",[t._v("close")])])],1),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{sm12:""}},[e("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:"/pod-upload/".concat(t.form.id),"auto-upload":!0,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,headers:t.headers,"on-success":t.handleSuccess,"on-error":t.handleError}},[e("i",{staticClass:"el-icon-upload"}),t._v(" "),e("div",{staticClass:"el-upload__text"},[t._v("Drop file here or "),e("em",[t._v("click to upload")])]),t._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("Upload you files here!")])])],1),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("v-list",{attrs:{dense:""}},[e("v-subheader",[t._v(t._s(t.form.order_no))]),t._v(" "),e("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[e("v-list-item",[e("v-list-item-icon",[e("v-icon",[t._v("mdi-cash-100")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{domProps:{textContent:t._s(t.form.total_price)}})],1)],1),t._v(" "),e("v-list-item",[e("v-list-item-icon",[e("v-icon",[t._v("mdi-update")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{domProps:{textContent:t._s(t.form.delivery_status)}})],1)],1)],1)],1)],1),t._v(" "),t.form.pod?e("v-flex",{attrs:{sm12:""}},[e("el-card",{attrs:{"body-style":{padding:"0px"}}},[e("img",{staticClass:"image",staticStyle:{width:"100%",height:"200px"},attrs:{src:t.form.pod.signature}}),t._v(" "),e("div",{staticStyle:{padding:"14px"}},[e("span",[t._v(t._s(t.form.pod.notes))]),t._v(" "),e("div",{staticClass:"bottom clearfix"},[e("time",{staticClass:"time"},[t._v(t._s(t.form.pod.created_at))])])])])],1):t._e(),t._v(" "),e("v-flex",{attrs:{sm12:""}},[t.pods.length>0?e("v-list",{attrs:{dense:"","two-line":""}},[e("v-subheader",[t._v(t._s(t.form.order_no))]),t._v(" "),e("v-list-item-group",{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},t._l(t.pods,(function(r){return e("v-list-item",{key:r.id,attrs:{href:r.path,target:"_blank"}},[e("v-list-item-icon",[e("v-icon",[t._v("mdi-draw")])],1),t._v(" "),e("v-list-item-content",[e("v-list-item-title",{domProps:{textContent:t._s(t.form.notes)}}),t._v(" "),e("v-list-item-subtitle",{domProps:{textContent:t._s(t.form.created_at)}})],1)],1)})),1)],1):t._e()],1)],1)],1)],1)],1):t._e()],1)],1)}),[],!1,null,null,null);e.a=c.exports},507:function(t,e,r){"use strict";var a=r(2);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var n={name:"orderStatus",data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()+864e5<Date.now()},shortcuts:[{text:"Today",onClick:function(t){t.$emit("pick",new Date)}},{text:"Tomorrow",onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}}]},dialog:!1,form:{customer_notes:"",delivery_date:"",delivery_status:"",zone_from:null,zone_to:null},zone_data:{zone_from:null,zone_to:null}}},created:function(){var t=this;eventBus.$on("multStatusEvent",(function(e){console.log(e),t.dialog=!0,t.selected=e,t.zones.length<1&&t.getZones()}))},methods:{getStatus:function(){this.$store.dispatch("getItems",{model:"statuses",update:"updateStatusList"})},getZones:function(){this.$store.dispatch("getItems",{model:"zones",update:"updateZone"})},updateStatus:function(){var t=this,e={model:"/sales_update",data:{form:this.form,orders:this.selected}};this.$store.dispatch("postItems",e).then((function(){t.close(),eventBus.$emit("saleEvent","mult"),t.form={customer_notes:"",delivery_date:"",delivery_status:"",zone_from:null,zone_to:null}}))},close:function(){this.dialog=!1}},mounted:function(){this.getStatus()},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(a.b)(["statuses","zones","errors","loading"]))},i=r(0),c=Object(i.a)(n,(function(){var t=this,e=t._self._c;return e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{persistent:"","max-width":"400px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card-title",[e("span",{staticClass:"headline",staticStyle:{margin:"auto"}},[t._v("Order Details")])]),t._v(" "),e("VDivider"),t._v(" "),e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{sm12:""}},[e("label",{staticClass:"col-md-5 col-lg-5"},[t._v("Status")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.delivery_status,callback:function(e){t.$set(t.form,"delivery_status",e)},expression:"form.delivery_status"}},t._l(t.statuses,(function(t){return e("el-option",{key:t.id,attrs:{label:t.status,value:t.status}})})),1),t._v(" "),t.errors.delivery_status?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.delivery_status[0]))]):t._e()],1),t._v(" "),"Scheduled"==t.form.delivery_status?e("v-flex",{attrs:{sm12:""}},[e("div",{staticClass:"block"},[e("span",{staticClass:"demonstration",staticStyle:{float:"left"}},[t._v("Schedule Date")]),t._v(" "),e("el-date-picker",{staticStyle:{width:"100%"},attrs:{format:"yyyy/MM/dd","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,type:"date",placeholder:"Pick a day"},model:{value:t.form.delivery_date,callback:function(e){t.$set(t.form,"delivery_date",e)},expression:"form.delivery_date"}})],1),t._v(" "),t.errors.delivery_date?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.delivery_date[0]))]):t._e()]):t._e(),t._v(" "),"Dispatched"==t.form.delivery_status?e("v-flex",{attrs:{sm12:""}},[e("label",{staticClass:"col-md-5 col-lg-5"},[t._v("Zone from")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.zone_from,callback:function(e){t.$set(t.form,"zone_from",e)},expression:"form.zone_from"}},t._l(t.zones,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.zone_from?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.zone_from[0]))]):t._e()],1):t._e(),t._v(" "),"Dispatched"==t.form.delivery_status?e("v-flex",{attrs:{sm12:""}},[e("label",{staticClass:"col-md-5 col-lg-5"},[t._v("Zone to")]),t._v(" "),e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Select"},model:{value:t.form.zone_to,callback:function(e){t.$set(t.form,"zone_to",e)},expression:"form.zone_to"}},t._l(t.zones,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),t.errors.zone_to?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.zone_to[0]))]):t._e()],1):t._e(),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("label",{staticStyle:{color:"#52627d"},attrs:{for:""}},[t._v("Comments")]),t._v(" "),e("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"comments",maxlength:"500","show-word-limit":""},model:{value:t.form.customer_notes,callback:function(e){t.$set(t.form,"customer_notes",e)},expression:"form.customer_notes"}}),t._v(" "),t.errors.customer_notes?e("small",{staticClass:"has-text-danger"},[t._v(t._s(t.errors.customer_notes[0]))]):t._e()],1)],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),t._v(" "),e("VSpacer"),t._v(" "),e("v-btn",{attrs:{color:"primary",loading:t.loading,disabled:t.loading},on:{click:t.updateStatus}},[t._v("Update")])],1)],1)],1)],1)}),[],!1,null,null,null);e.a=c.exports},656:function(t,e,r){var a=r(855);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};r(4)(a,s);a.locals&&(t.exports=a.locals)},659:function(t,e,r){var a=r(861);"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};r(4)(a,s);a.locals&&(t.exports=a.locals)},854:function(t,e,r){"use strict";r(656)},855:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,".has-text-danger[data-v-1d4f3e3c]{font-size:10px!important}.v-card[data-v-1d4f3e3c]{margin-bottom:16px}.v-tab[data-v-1d4f3e3c]{text-transform:none;font-weight:500}.v-card-title[data-v-1d4f3e3c]{font-size:1.25rem;font-weight:500;padding-bottom:12px}",""])},860:function(t,e,r){"use strict";r(659)},861:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,".has-text-danger[data-v-76ed8826]{font-size:10px!important}",""])}}]);