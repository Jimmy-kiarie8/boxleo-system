(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{871:function(t,e,r){"use strict";r.r(e);var o=r(2),a=r(497),n=r.n(a);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u={props:["product_id"],name:"stock_quantity",data:function(){return{dialog:!1,form:{},items:{}}},created:function(){var t=this;eventBus.$on("updateQtyEvent",(function(e){t.dialog=!0,t.form=e,t.form.add_qty=0,t.getBins(e.warehouse_id),t.warehouses.length<1&&t.getWarehouses()}))},methods:{save:function(){this.form.product_id=this.product_id,this.form.update="single";var t={model:"stock_update",data:this.form};this.$store.dispatch("postItems",t).then((function(t){eventBus.$emit("productEvent")}))},close:function(){this.dialog=!1},getWarehouses:function(){this.$store.dispatch("getItems",{model:"/warehouses",update:"updateWarehouseList"})},getBins:function(t){var e={model:"/warehouse_bin",update:"updateBins",id:t};this.$store.dispatch("showItem",e)},getBinQty:function(t){var e=this,r={product_id:this.product_id,bin_id:t};axios.post("product_quantity",r).then((function(t){e.form.onhand=t.data.onhand}))}},computed:l(l({},Object(o.b)(["loading","warehouses","bins"])),{},{new_qty:function(){return 0}})},d=r(0),v=Object(d.a)(u,(function(){var t=this,e=t._self._c;return e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-card",[e("v-card-title"),t._v(" "),e("v-divider"),t._v(" "),e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{sm12:""}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Warehouse"},on:{change:t.getBins},model:{value:t.form.warehouse_id,callback:function(e){t.$set(t.form,"warehouse_id",e)},expression:"form.warehouse_id"}},t._l(t.warehouses,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),t.form.warehouse_id?e("v-flex",{attrs:{sm12:""}},[e("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"Bin"},on:{change:t.getBinQty},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}},t._l(t.bins,(function(t){return e("el-option",{key:t.id,attrs:{label:t.code,value:t.id}})})),1)],1):t._e(),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("label",{attrs:{for:""}},[t._v("Product name")]),t._v(" "),e("el-input",{attrs:{placeholder:"Product name",disabled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("label",{attrs:{for:""}},[t._v("Available Quantity")]),t._v(" "),e("el-input",{attrs:{placeholder:"Quantity",disabled:""},model:{value:t.form.pivot.available_for_sale,callback:function(e){t.$set(t.form.pivot,"available_for_sale",e)},expression:"form.pivot.available_for_sale"}})],1),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("label",{attrs:{for:""}},[t._v("Add Quantity")]),t._v(" "),e("el-input",{attrs:{placeholder:"Quantity"},model:{value:t.form.add_qty,callback:function(e){t.$set(t.form,"add_qty",e)},expression:"form.add_qty"}})],1),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("label",{attrs:{for:""}},[t._v("New Quantity")]),t._v(" "),e("el-input",{attrs:{placeholder:"Quantity",value:parseInt(t.form.pivot.available_for_sale)+parseInt(t.form.add_qty),disabled:""}})],1),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("label",{attrs:{for:""}},[t._v("Quantity Onhand")]),t._v(" "),e("el-input",{attrs:{placeholder:"Quantity"},model:{value:t.form.pivot.onhand,callback:function(e){t.$set(t.form.pivot,"onhand",e)},expression:"form.pivot.onhand"}})],1),t._v(" "),e("v-flex",{attrs:{sm12:""}},[e("label",{attrs:{for:""}},[t._v("Quantity commited(Dispatched)")]),t._v(" "),e("el-input",{attrs:{placeholder:"Quantity"},model:{value:t.form.pivot.commited,callback:function(e){t.$set(t.form.pivot,"commited",e)},expression:"form.pivot.commited"}})],1)],1)],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Close")]),t._v(" "),e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"blue darken-1",text:"",loading:t.loading,disabled:t.loading},on:{click:t.save}},[t._v("Update")])],1)],1)],1)],1)}),[],!1,null,null,null).exports;function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=p(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b={components:{VueQrcode:n.a,myStock:v},data:function(){return{singleExpand:!0,search:"",expanded:[],form:{},headers:[{text:"Bin name",align:"start",value:"name"},{text:"Bin code",value:"code"},,{text:"On hand",value:"pivot.onhand"},,{text:"Commited",value:"pivot.commited"},,{text:"Available for sale",value:"pivot.available_for_sale"},{text:"Created on",value:"created_at"},{text:"Actions",value:"actions"},{text:"Details",value:"data-table-expand"}],value:"https://example.com",size:300}},methods:{showDetails:function(){var t={model:"product_details",update:"updateProductsList",id:this.$route.params.id};this.$store.dispatch("showItem",t)},openAddQuantity:function(t){eventBus.$emit("updateQtyEvent",t)}},mounted:function(){this.showDetails()},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(o.b)(["products"]))},_=Object(d.a)(b,(function(){var t=this,e=t._self._c;return e("v-layout",{attrs:{"justify-center":"","align-center":"",wrap:""}},[e("v-card",{staticStyle:{width:"100%"},attrs:{elevation:"3"}},[e("v-card-title",[e("v-btn",{attrs:{color:"primary",icon:"",small:""},on:{click:t.showDetails}},[e("v-icon",{attrs:{dark:""}},[t._v("mdi-refresh")])],1),t._v(" "),e("v-spacer"),t._v(" "),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.products.bins,"single-expand":t.singleExpand,expanded:t.expanded,"item-key":"name","show-expand":""},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"expanded-item",fn:function(r){var o=r.headers,a=r.item;return[e("td",{attrs:{colspan:o.length}},[e("table",{staticClass:"table table-striped table-hover"},[e("thead",[e("th",[t._v("Code")]),t._v(" "),e("th",[t._v("Warehouse")]),t._v(" "),e("th",[t._v("Area")]),t._v(" "),e("th",[t._v("Row")]),t._v(" "),e("th",[t._v("Bay")]),t._v(" "),e("th",[t._v("Level")]),t._v(" "),e("th",[t._v("Bin")])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("vue-qrcode",{attrs:{value:a.code,options:{width:80}}})],1),t._v(" "),e("td",[t._v("\n                                    "+t._s(a.warehouse.name)+"\n                                ")]),t._v(" "),e("td",[t._v("\n                                    "+t._s(a.area.name)+"\n                                ")]),t._v(" "),e("td",[t._v("\n                                    "+t._s(a.row.name)+"\n                                ")]),t._v(" "),e("td",[t._v("\n                                    "+t._s(a.bay.name)+"\n                                ")]),t._v(" "),e("td",[t._v("\n                                    "+t._s(a.level.name)+"\n                                ")]),t._v(" "),e("td",[t._v("\n                                    "+t._s(a.name)+"\n                                ")])])])])])]}},{key:"item.actions",fn:function(r){var o=r.item;return[e("v-btn",{attrs:{color:"primary",icon:""},on:{click:function(e){return t.openAddQuantity(o)}}},[e("v-icon",{attrs:{small:""}},[t._v("mdi-thermometer-plus")])],1)]}}])}),t._v(" "),e("myStock",{attrs:{product_id:t.$route.params.id}})],1)],1)}),[],!1,null,null,null);e.default=_.exports}}]);